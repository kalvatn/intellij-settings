<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/schedule2/tasks/virtualleague/VDROddsSaver.java" timestamp="1549543290726">
        <mark key="[" line="78" column="60" />
        <mark key="]" line="78" column="71" />
        <mark key="^" line="78" column="71" />
        <mark key="." line="78" column="71" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/common/Util4.java" timestamp="1549633746575">
        <mark key="'" line="1174" column="33" />
        <mark key="[" line="468" column="0" />
        <mark key="]" line="476" column="3" />
      </file>
      <file name="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" timestamp="1549549666670">
        <mark key="'" line="244" column="52" />
      </file>
      <file name="/work/projects/gitlab/livescore/common/src/test/java/com/oddsarbitrage/livescore/TestMatch2.java" timestamp="1549952411870">
        <mark key="[" line="15" column="0" />
        <mark key="]" line="15" column="0" />
        <mark key="." line="15" column="0" />
      </file>
      <file name="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/livescore/event/Event.java" timestamp="1550066850720">
        <mark key="'" line="1723" column="17" />
        <mark key="[" line="1739" column="85" />
        <mark key="]" line="1740" column="24" />
        <mark key="." line="1740" column="24" />
        <mark key="^" line="1740" column="24" />
      </file>
      <file name="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-common/2019.1.1-SNAPSHOT/ingame-betting-common-2019.1.1-20190206.064553-212.jar!/com/oddsarbitrage/liveodds/server/SubType.class" timestamp="1549543200142">
        <mark key="'" line="922" column="13" />
      </file>
      <file name="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190204.115517-268.jar!/com/oddsarbitrage/scout/AstMatch.class" timestamp="1549284599888">
        <mark key="'" line="126" column="36" />
      </file>
      <file name="/work/projects/gitlab/java/xmlexport/xmlexport-ejb/src/main/java/com/betradar/export/services/ranking/TennisRankingServiceBean.java" timestamp="1549970534362">
        <mark key="'" line="224" column="26" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/schedule2/tasks/virtualleague/VirtualGamesProblemDetector.java" timestamp="1549466606024">
        <mark key="[" line="581" column="57" />
        <mark key="]" line="581" column="58" />
        <mark key="." line="581" column="58" />
        <mark key="^" line="581" column="58" />
      </file>
      <file name="/work/projects/gitlab/java/league-standings-builder/src/main/java/com/oddsarbitrage/common/Util4.java" timestamp="1549633752253">
        <mark key="'" line="121" column="4" />
        <mark key="[" line="5" column="0" />
        <mark key="]" line="13" column="5" />
        <mark key="." line="5" column="0" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/odds/ExSpreadOdds.java" timestamp="1549542341877">
        <mark key="[" line="34" column="19" />
        <mark key="]" line="34" column="36" />
        <mark key="." line="34" column="36" />
        <mark key="^" line="34" column="36" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/schedule2/tasks/virtualleague/VDRCreateDefaultOddskeys.java" timestamp="1549541598057">
        <mark key="[" line="35" column="27" />
        <mark key="]" line="35" column="27" />
        <mark key="." line="35" column="27" />
        <mark key="^" line="35" column="27" />
      </file>
      <file name="/work/projects/gitlab/livescore/common/pom.xml" timestamp="1549951979706">
        <mark key="[" line="32" column="26" />
        <mark key="]" line="32" column="26" />
        <mark key="^" line="32" column="26" />
        <mark key="." line="32" column="26" />
      </file>
      <file name="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" timestamp="1549557139128">
        <mark key="'" line="795" column="2" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/shittyutilsthatshouldnotexistinjavasource/VolleyballLeagueBreakProbabilityUtilityWrapperForScoutMatchDataVolleyballUtil.java" timestamp="1549541459575">
        <mark key="[" line="26" column="5" />
        <mark key="]" line="29" column="7" />
        <mark key="." line="29" column="7" />
        <mark key="^" line="29" column="7" />
      </file>
      <file name="/work/projects/gitlab/java/league-standings-builder/pom.xml" timestamp="1549633428502">
        <mark key="[" line="37" column="27" />
        <mark key="]" line="37" column="26" />
        <mark key="." line="37" column="26" />
        <mark key="^" line="37" column="26" />
      </file>
      <file name="/work/projects/gitlab/livescore/common/src/test/java/com/oddsarbitrage/livescore/data/LivescoreFreemarkerTest.java" timestamp="1549952359953">
        <mark key="[" line="10" column="0" />
        <mark key="]" line="10" column="0" />
        <mark key="." line="10" column="0" />
      </file>
      <file name="/work/projects/gitlab/java/league-standings-builder/src/main/java/com/oddsarbitrage/statistics/dbdata/ext/Match.java" timestamp="1549629845629">
        <mark key="[" line="31" column="0" />
        <mark key="]" line="31" column="0" />
        <mark key="." line="31" column="0" />
      </file>
      <file name="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/livescore/NewEventRecord.java" timestamp="1550066802661">
        <mark key="[" line="193" column="98" />
        <mark key="]" line="193" column="169" />
        <mark key="^" line="193" column="169" />
        <mark key="." line="193" column="169" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/itf/TimeOut.java" timestamp="1549467935710">
        <mark key="[" line="147" column="27" />
        <mark key="]" line="147" column="35" />
        <mark key="." line="147" column="35" />
        <mark key="^" line="147" column="35" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/bpr/render/xls/XSSFFontInfoWrapper.java" timestamp="1549551239524">
        <mark key="[" line="50" column="0" />
        <mark key="]" line="50" column="0" />
        <mark key="." line="50" column="0" />
        <mark key="^" line="50" column="74" />
      </file>
      <file name="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" timestamp="1549466042121">
        <mark key="'" line="200" column="16" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/specialodds/generator/beachvolleyball/BeachVolleyballIngame.java" timestamp="1549541570221">
        <mark key="[" line="192" column="131" />
        <mark key="]" line="192" column="135" />
        <mark key="." line="192" column="135" />
        <mark key="^" line="192" column="135" />
      </file>
      <file name="/work/projects/gitlab/java/xmlexport/xmlexport-ejb/src/main/java/com/betradar/export/services/schedule/ScheduleAndResultServiceBean.java" timestamp="1550062957652">
        <mark key="a" line="0" column="0" />
        <mark key="'" line="225" column="12" />
        <mark key="[" line="0" column="0" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/schedule2/tasks/virtualleague/VHCCreateDefaultOddskeys.java" timestamp="1549541641070">
        <mark key="[" line="41" column="27" />
        <mark key="]" line="41" column="27" />
        <mark key="." line="41" column="27" />
        <mark key="^" line="41" column="27" />
      </file>
      <file name="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/livescore/event/PitchLocationEvent.java" timestamp="1550066624771">
        <mark key="[" line="137" column="88" />
        <mark key="]" line="138" column="17" />
        <mark key="^" line="138" column="17" />
        <mark key="." line="138" column="17" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/feeds/MatchOdds.java" timestamp="1549543638799">
        <mark key="[" line="380" column="24" />
        <mark key="]" line="380" column="37" />
        <mark key="^" line="380" column="37" />
        <mark key="." line="380" column="37" />
      </file>
      <file name="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/AstMatch.class" timestamp="1549465984727">
        <mark key="'" line="600" column="130" />
      </file>
      <file name="/work/projects/gitlab/java/sportradar-common/pom.xml" timestamp="1549557372959">
        <mark key="'" line="224" column="28" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/schedule2/tasks/translation/TranslationFeed.java" timestamp="1549541673922">
        <mark key="[" line="304" column="21" />
        <mark key="]" line="304" column="20" />
        <mark key="." line="304" column="20" />
        <mark key="^" line="304" column="20" />
      </file>
      <file name="/fragment.java" timestamp="1550065743072">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="/work/projects/gitlab/java/source/src/com/oddsarbitrage/bpr/render/xls/easy_xls/EasyCell.java" timestamp="1549551074527">
        <mark key="[" line="317" column="38" />
        <mark key="]" line="317" column="38" />
        <mark key="." line="317" column="38" />
        <mark key="^" line="317" column="38" />
      </file>
    </filemarks>
    <jumps>
      <jump line="191" column="19" filename="/work/projects/gitlab/java/xmlexport/xmlexport-ejb/src/main/java/com/betradar/export/services/ranking/TennisRankingServiceBean.java" />
      <jump line="59" column="57" filename="/work/projects/gitlab/java/xmlexport/xmlexport-ejb/src/main/java/com/betradar/export/services/ranking/TennisRankingServiceBean.java" />
      <jump line="149" column="47" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/liveodds/livescore/LiveoddsToLivescore.java" />
      <jump line="62" column="73" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190204.115517-268.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="87" column="14" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190204.115517-268.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="126" column="36" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190204.115517-268.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="449" column="21" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/scout/livescore/ScoutLivescoreComponent.java" />
      <jump line="122" column="28" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/scout/livescore/ScoutLivescoreComponent.java" />
      <jump line="140" column="12" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/scout/livescore/ScoutLivescoreComponent.java" />
      <jump line="492" column="29" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/scout/livescore/ScoutLivescoreComponent.java" />
      <jump line="723" column="39" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/scout/livescore/ScoutLivescoreComponent.java" />
      <jump line="131" column="32" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/scout/livescore/ScoutToLivescore.java" />
      <jump line="68" column="10" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/scout/livescore/ScoutToLivescore.java" />
      <jump line="233" column="77" filename="$MAVEN_REPOSITORY$/com/google/guava/guava/26.0-jre/guava-26.0-jre-sources.jar!/com/google/common/base/Optional.java" />
      <jump line="232" column="14" filename="$MAVEN_REPOSITORY$/com/google/guava/guava/26.0-jre/guava-26.0-jre-sources.jar!/com/google/common/base/Optional.java" />
      <jump line="246" column="21" filename="$MAVEN_REPOSITORY$/com/google/guava/guava/26.0-jre/guava-26.0-jre-sources.jar!/com/google/common/base/Optional.java" />
      <jump line="61" column="37" filename="$MAVEN_REPOSITORY$/com/google/guava/guava/26.0-jre/guava-26.0-jre-sources.jar!/com/google/common/base/Optional.java" />
      <jump line="124" column="77" filename="$MAVEN_REPOSITORY$/com/google/guava/guava/26.0-jre/guava-26.0-jre-sources.jar!/com/google/common/base/Optional.java" />
      <jump line="213" column="14" filename="$MAVEN_REPOSITORY$/com/google/guava/guava/26.0-jre/guava-26.0-jre-sources.jar!/com/google/common/base/Optional.java" />
      <jump line="192" column="27" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="563" column="41" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="286" column="27" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="142" column="32" filename="/work/projects/gitlab/java/source/src/com/oddsarbitrage/odds/OddsGetter.java" />
      <jump line="686" column="37" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-common/2019.1.1-SNAPSHOT/ingame-betting-common-2019.1.1-20190206.064553-212.jar!/com/oddsarbitrage/liveodds/server/SubType.class" />
      <jump line="809" column="8" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-common/2019.1.1-SNAPSHOT/ingame-betting-common-2019.1.1-20190206.064553-212.jar!/com/oddsarbitrage/liveodds/server/SubType.class" />
      <jump line="810" column="10" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-common/2019.1.1-SNAPSHOT/ingame-betting-common-2019.1.1-20190206.064553-212.jar!/com/oddsarbitrage/liveodds/server/SubType.class" />
      <jump line="888" column="11" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-common/2019.1.1-SNAPSHOT/ingame-betting-common-2019.1.1-20190206.064553-212.jar!/com/oddsarbitrage/liveodds/server/SubType.class" />
      <jump line="922" column="13" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-common/2019.1.1-SNAPSHOT/ingame-betting-common-2019.1.1-20190206.064553-212.jar!/com/oddsarbitrage/liveodds/server/SubType.class" />
      <jump line="26" column="24" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="119" column="8" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="286" column="87" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="589" column="116" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="596" column="142" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="597" column="75" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="600" column="130" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/AstMatch.class" />
      <jump line="25" column="13" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="38" column="46" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="46" column="32" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="87" column="16" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="88" column="33" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="90" column="49" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="94" column="49" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="100" column="16" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="113" column="16" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="116" column="16" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="123" column="20" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="126" column="20" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="129" column="20" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="132" column="20" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="135" column="20" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="138" column="20" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="200" column="16" filename="$MAVEN_REPOSITORY$/com/sportradar/ingame-betting-livedata/2019.1.1-SNAPSHOT/ingame-betting-livedata-2019.1.1-20190206.064621-280.jar!/com/oddsarbitrage/scout/sports/volleyball/ScoutMatchDataVolleyball.class" />
      <jump line="88" column="31" filename="/work/projects/gitlab/livescore/common/pom.xml" />
      <jump line="69" column="31" filename="/work/projects/gitlab/livescore/common/pom.xml" />
      <jump line="375" column="56" filename="/work/projects/gitlab/java/source/src/com/oddsarbitrage/integration/omaki/importer/OmakiMatchAlertHolder.java" />
      <jump line="313" column="20" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="426" column="25" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="451" column="25" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="466" column="25" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="536" column="25" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="577" column="25" filename="/work/projects/gitlab/java/source/pom.xml" />
      <jump line="66" column="6" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="165" column="36" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="166" column="38" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="167" column="35" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="169" column="28" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="211" column="36" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="212" column="61" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="214" column="19" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="215" column="24" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="244" column="52" filename="$MAVEN_REPOSITORY$/org/apache/poi/poi-ooxml/3.17/poi-ooxml-3.17-sources.jar!/org/apache/poi/xssf/usermodel/XSSFCellStyle.java" />
      <jump line="80" column="44" filename="/work/projects/gitlab/java/source/src/com/oddsarbitrage/bpr/render/xls/XlsBorderStyle.java" />
      <jump line="164" column="10" filename="/work/projects/gitlab/java/source/src/com/oddsarbitrage/bpr/render/xls/XlsBorderStyle.java" />
      <jump line="24" column="21" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="676" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="672" column="30" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="749" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="750" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="751" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="752" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="753" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="754" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="755" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="794" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="795" column="2" filename="/work/projects/gitlab/java/sportradar-common/src/main/java/com/oddsarbitrage/statistics/Statistics.java" />
      <jump line="224" column="28" filename="/work/projects/gitlab/java/sportradar-common/pom.xml" />
      <jump line="306" column="2" filename="/work/projects/gitlab/java/league-standings-builder/src/main/java/com/oddsarbitrage/common/Util4.java" />
      <jump line="20" column="45" filename="/work/projects/gitlab/java/league-standings-builder/src/main/java/com/oddsarbitrage/common/Util4.java" />
      <jump line="61" column="26" filename="/work/projects/gitlab/java/source/src/com/oddsarbitrage/common/Util4.java" />
      <jump line="463" column="49" filename="/work/projects/gitlab/java/source/src/com/oddsarbitrage/common/Util4.java" />
      <jump line="1174" column="33" filename="/work/projects/gitlab/java/source/src/com/oddsarbitrage/common/Util4.java" />
      <jump line="140" column="56" filename="/work/projects/gitlab/java/league-standings-builder/src/main/java/com/oddsarbitrage/common/Util4.java" />
      <jump line="112" column="4" filename="/work/projects/gitlab/java/league-standings-builder/src/main/java/com/oddsarbitrage/common/Util4.java" />
      <jump line="262" column="69" filename="/work/projects/gitlab/java/xmlexport/xmlexport-ejb/src/main/java/com/betradar/export/services/ranking/TennisRankingServiceBean.java" />
      <jump line="224" column="26" filename="/work/projects/gitlab/java/xmlexport/xmlexport-ejb/src/main/java/com/betradar/export/services/ranking/TennisRankingServiceBean.java" />
      <jump line="225" column="12" filename="/work/projects/gitlab/java/xmlexport/xmlexport-ejb/src/main/java/com/betradar/export/services/schedule/ScheduleAndResultServiceBean.java" />
      <jump line="223" column="27" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/livescore/event/PitchLocationEvent.java" />
      <jump line="1147" column="46" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/livescore/event/Event.java" />
      <jump line="1723" column="17" filename="/work/projects/gitlab/livescore/common/src/main/java/com/oddsarbitrage/livescore/event/Event.java" />
      <jump line="60" column="0" filename="/work/projects/gitlab/livescore/common/src/main/resources/log4j.xml" />
    </jumps>
    <registers>
      <register name="&quot;" type="2">
        <text encoding="base64">ICAgICAgU3RyaW5nLmZvcm1hdCgiVElNRSBJUyBOTyBUSU1FIiwgKQo=</text>
      </register>
      <register name="-" type="4">
        <text>getMatchMillis</text>
      </register>
      <register name="/" type="4">
        <text>updateTime</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICBwdWJsaWMgc3RhdGljIFN0cmluZyByZXBsYWNlQVNDSUlDaGFyQ29ycmVjdCgKICAgICAgU3RyaW5nIHNvdXJjZSwgaW50IHJlbW92ZUFTQ0lJQ29kZSwgaW50IHJlcGxhY2VBU0NJSUNvZGUpIHsKICAgIFN0cmluZ0J1ZmZlciByZXRWYWwgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGgoKTsgaSsrKSB7CiAgICAgIGlmICgoaW50KSBzb3VyY2UuY2hhckF0KGkpICE9IHJlbW92ZUFTQ0lJQ29kZSkgcmV0VmFsLmFwcGVuZChzb3VyY2UuY2hhckF0KGkpKTsKICAgICAgZWxzZSByZXRWYWwuYXBwZW5kKChjaGFyKSByZXBsYWNlQVNDSUlDb2RlKTsKICAgIH0KICAgIHJldHVybiByZXRWYWwudG9TdHJpbmcoKTsKICB9Cg==</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">ICAgICAgU3RyaW5nLmZvcm1hdCgiVElNRSBJUyBOTyBUSU1FIiwgKQo=</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgIFN5c3RlbS5vdXQucHJpbnRsbigpOwo=</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">CTxhcHBlbmRlciBuYW1lPSJEZWZhdWx0RXJyb3JMb2dBcHBlbmRlclN5bmMiIGNsYXNzPSJvcmcuYXBhY2hlLmxvZzRqLkZpbGVBcHBlbmRlciI+CgkJPHBhcmFtIG5hbWU9IkZpbGUiIHZhbHVlPSIuL2xvZy9lcnJvcnMubG9nIiAvPgoJCTxwYXJhbSBuYW1lPSJBcHBlbmQiIHZhbHVlPSJ0cnVlIiAvPgoJCTxwYXJhbSBuYW1lPSJUaHJlc2hvbGQiIHZhbHVlPSJlcnJvciIgLz4KCQk8bGF5b3V0IGNsYXNzPSJvcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXQiPgoJCQk8cGFyYW0gbmFtZT0iQ29udmVyc2lvblBhdHRlcm4iIHZhbHVlPSIlZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAoJXApOiAlYy4lTSglTCklbiAtICVtJW4iIC8+CgkJPC9sYXlvdXQ+Cgk8L2FwcGVuZGVyPgoJCgk8YXBwZW5kZXIgbmFtZT0iRGVmYXVsdEVycm9yTG9nQXBwZW5kZXIiIGNsYXNzPSJvcmcuYXBhY2hlLmxvZzRqLkFzeW5jQXBwZW5kZXIiPgoJCTxwYXJhbSBuYW1lPSJCdWZmZXJTaXplIiB2YWx1ZT0iMTAwMCIvPgoJCTxwYXJhbSBuYW1lPSJCbG9ja2luZyIgdmFsdWU9ImZhbHNlIi8+CgkJPHBhcmFtIG5hbWU9IkxvY2F0aW9uSW5mbyIgdmFsdWU9InRydWUiLz4KCQk8YXBwZW5kZXItcmVmIHJlZj0iRGVmYXVsdEVycm9yTG9nQXBwZW5kZXJTeW5jIiAvPgoJPC9hcHBlbmRlcj4KCQoJPGFwcGVuZGVyIG5hbWU9IkNvbnNvbGVBcHBlbmRlclN5bmMiIGNsYXNzPSJvcmcuYXBhY2hlLmxvZzRqLkNvbnNvbGVBcHBlbmRlciI+CgkJPHBhcmFtIG5hbWU9IlRocmVzaG9sZCIgdmFsdWU9ImRlYnVnIiAvPgoJCTxsYXlvdXQgY2xhc3M9Im9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dCI+CgkJCTxwYXJhbSBuYW1lPSJDb252ZXJzaW9uUGF0dGVybiIgdmFsdWU9IiVke3l5eXktTU0tZGQgSEg6bW06c3N9ICglcCk6ICVjezF9LiVNKCVMKSAlbSVuIiAvPgoJCTwvbGF5b3V0PgoJPC9hcHBlbmRlcj4KCQo=</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">aW1wb3J0IG9yZy5hbnRsci5ydW50aW1lLm1pc2MuU3RhdHM7Cg==</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">aW1wb3J0IG9yZy5lbGFzdGljc2VhcmNoLmNvbW1vbi5jb2xsZWN0LkltbXV0YWJsZVNldDsK</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgKiBAcGFyYW0gd2l0aE5hbWVzCg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">ICBwdWJsaWMgc3RhdGljIFN0cmluZyByZXBsYWNlQVNDSUlDaGFyQ29ycmVjdCgKICAgICAgU3RyaW5nIHNvdXJjZSwgaW50IHJlbW92ZUFTQ0lJQ29kZSwgaW50IHJlcGxhY2VBU0NJSUNvZGUpIHsKICAgIFN0cmluZ0J1ZmZlciByZXRWYWwgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGgoKTsgaSsrKSB7CiAgICAgIGlmICgoaW50KSBzb3VyY2UuY2hhckF0KGkpICE9IHJlbW92ZUFTQ0lJQ29kZSkgcmV0VmFsLmFwcGVuZChzb3VyY2UuY2hhckF0KGkpKTsKICAgICAgZWxzZSByZXRWYWwuYXBwZW5kKChjaGFyKSByZXBsYWNlQVNDSUlDb2RlKTsKICAgIH0KICAgIHJldHVybiByZXRWYWwudG9TdHJpbmcoKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHJlbW92ZUFTQ0lJQ2hhckNvcnJlY3QoU3RyaW5nIHNvdXJjZSwgaW50IHJlbW92ZUFTQ0lJQ29kZSkgewogICAgU3RyaW5nQnVmZmVyIHJldFZhbCA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aCgpOyBpKyspIHsKICAgICAgaWYgKChpbnQpIHNvdXJjZS5jaGFyQXQoaSkgIT0gcmVtb3ZlQVNDSUlDb2RlKSByZXRWYWwuYXBwZW5kKHNvdXJjZS5jaGFyQXQoaSkpOwogICAgfQogICAgcmV0dXJuIHJldFZhbC50b1N0cmluZygpOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgcmVtb3ZlRWxlbWVudHMoU3RyaW5nIHNvdXJjZSwgU3RyaW5nW10gZWxlbWVudHNUb1JlbW92ZSkgewogICAgU3RyaW5nIHJldFZhbCA9IHNvdXJjZTsKICAgIGZvciAoaW50IGogPSAwOyBqIDwgZWxlbWVudHNUb1JlbW92ZS5sZW5ndGg7IGorKykgewogICAgICByZXRWYWwgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwucmVtb3ZlRWxlbWVudHMocmV0VmFsLCBlbGVtZW50c1RvUmVtb3ZlW2pdKTsKICAgIH0KICAgIHJldHVybiByZXRWYWw7CiAgfQoKICBwdWJsaWMgc3RhdGljIFN0cmluZyByZW1vdmVFbGVtZW50cygKICAgICAgU3RyaW5nIHNvdXJjZSwgU3RyaW5nIHJlbW92ZUNvbmRpdGlvbiwgYm9vbGVhbiBjYXNlU2Vuc2l0aXZlKSB7CiAgICBpZiAoY2FzZVNlbnNpdGl2ZSA9PSB0cnVlKSB7CiAgICAgIHNvdXJjZSA9IHNvdXJjZS50b1VwcGVyQ2FzZSgpOwogICAgICByZW1vdmVDb25kaXRpb24gPSByZW1vdmVDb25kaXRpb24udG9VcHBlckNhc2UoKTsKICAgIH0KICAgIHdoaWxlIChzb3VyY2UuaW5kZXhPZihyZW1vdmVDb25kaXRpb24pID4gLTEpIHsKICAgICAgU3RyaW5nIHRlbXAgPSBzb3VyY2Uuc3Vic3RyaW5nKDAsIHNvdXJjZS5pbmRleE9mKHJlbW92ZUNvbmRpdGlvbikpOwogICAgICBTdHJpbmcgdGVtcDIgPQogICAgICAgICAgc291cmNlLnN1YnN0cmluZygKICAgICAgICAgICAgICBzb3VyY2UuaW5kZXhPZihyZW1vdmVDb25kaXRpb24pICsgcmVtb3ZlQ29uZGl0aW9uLmxlbmd0aCgpLCBzb3VyY2UubGVuZ3RoKCkpOwogICAgICBzb3VyY2UgPSB0ZW1wICsgIiAiICsgdGVtcDI7CiAgICB9CiAgICByZXR1cm4gc291cmNlOwogIH0KCiAgLy8gcGFyYW0gbWF0Y2hEYXRlIFRoZSBzdHJpbmcgY29udGFpbmluZyB0aGUgc3RhcnQgb2YgdGhlIG1hdGNoCiAgLy8gICAgICAgICAgICAgICAgIEV4YW1wbGVzOgogIC8vICAgICAgICAgICAgICAgICBBdWcgMjEgMjAwMCAwMzozNSBDU1QKICAvLyAgICAgICAgICAgICAgICAgMTAtMTIvMjAwMCAxODowMAogIC8vIHBhcmFtIGZvcm1hdCBGb3JtYXQgb2YgdGhlIGRhdGUuIFRoaXMgbXVzdCBjb250YWluIHRoZSBmb2xsb3dpbmcgZWxlbWVudHMKICAvLyAgICAgICAgICAgICAgTU8gKE1vbnRoKSAsIERBIChEYXRlL2RheSkgLCBZRSAoWUVBUiksIEhPIChIb3VyKSAsIE1JIChtaW51dGVzKSAsIFggICggTm90IHVzZSB0aGUgZWxlbWVudC4gZm9yIGV4YW1wbGUgRnJpZGF5ICkKICAvLyAgICAgICAgICAgICAgRXhhbXBsZSBpZiB0aGUgZGF0ZXN0cmluZyBpczoKICAvLyAgICAgICAgICAgICAgRnJpIEF1ZyAyMSAyMDAwIDAzOjM1IENTVCAoIEZyaSArIENlbnRyZWJldCBmb3JtYXQgKSwgdGhlbiB0aGUgZm9ybWF0IHNob3VsZCBiZQogIC8vICAgICAgICAgICAgICBYIE1PIERBIFlFIEhPIE1JCiAgLy8gcGFyYW0gdGltZVpvbmUgVGhlIGV4dHJhIGhvdXJzIHRvIGFkZCB0byB0aGUgdGltZS9zdWJ0cmFjdCBmcm9tIHRoZSB0aW1lCiAgLy8gICAgICAgICAgICAgICAgVGhpcyBwYXJhbSBtdXN0IGJlIGFkZGVkIGFsdGhvdWdoIHRoZSBtYXRjaGRhdGUgc3RyaW5nIGNvbnRhaW5zCiAgLy8gICAgICAgICAgICAgICAgYSBDU1Qgb3Igd2hhdGV2ZXIuIElmIHRoaXMgaXMgbm90IGFkZGVkLCBsb2NhbCB0aW1lIGlzIHVzZWQKICAvLyAgICAgICAgICAgICAgICBFeGFtcGxlOiAzIG9yIC01CgogIHB1YmxpYyBzdGF0aWMgRGF0ZSBjb252ZXJ0RGF0ZShTdHJpbmcgbWF0Y2hEYXRlLCBTdHJpbmcgZm9ybWF0LCBpbnQgdGltZVpvbmUpIHsKICAgIERhdGUgcmV0VmFsID0gY29udmVydERhdGUobWF0Y2hEYXRlLCBmb3JtYXQsIG51bGwpOwogICAgaWYgKHRpbWVab25lICE9IDApIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5hZGRIb3VycyhyZXRWYWwsIHRpbWVab25lKTsKICAgIHJldHVybiByZXRWYWw7CiAgfQoKICBwdWJsaWMgc3RhdGljIERhdGUgY29udmVydERhdGUoCiAgICAgIFN0cmluZyBkYXRlU3RyaW5nLCBTdHJpbmcgZGF0ZUZvcm1hdCwgaW50IHRpbWVab25lLCBpbnQgY3VycmVudFllYXIpIHsKICAgIC8vIHRpbWVab25lIG5vdCBpbiB1c2UgISEKICAgIHJldHVybiBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuY29udmVydERhdGUoZGF0ZVN0cmluZywgZGF0ZUZvcm1hdCwgbnVsbCwgY3VycmVudFllYXIpOwogIH0KCiAgcHVibGljIHN0YXRpYyBEYXRlIGNvbnZlcnREYXRlKFN0cmluZyBkYXRlU3RyaW5nLCBTdHJpbmcgZGF0ZUZvcm1hdCwgU3RyaW5nIHRpbWVab25lKSB7CiAgICByZXR1cm4gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmNvbnZlcnREYXRlKAogICAgICAgIGRhdGVTdHJpbmcsCiAgICAgICAgZGF0ZUZvcm1hdCwKICAgICAgICB0aW1lWm9uZSwKICAgICAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0UmVhbFllYXIobmV3IERhdGUoKS5nZXRZZWFyKCkpKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgRGF0ZSBjb252ZXJ0RGF0ZVNlY29uZHNDb3JyZWN0KAogICAgICBTdHJpbmcgbWF0Y2hEYXRlLCBTdHJpbmcgZm9ybWF0LCBTdHJpbmcgdGltZVpvbmUpIHsKICAgIFZlY3RvciBzcGxpdEVsZW1lbnRzID0gbmV3IFZlY3RvcigpOwogICAgc3BsaXRFbGVtZW50cy5hZGRFbGVtZW50KG5ldyBTdHJpbmcoIiAiKSk7CiAgICBzcGxpdEVsZW1lbnRzLmFkZEVsZW1lbnQobmV3IFN0cmluZygiLSIpKTsKICAgIHNwbGl0RWxlbWVudHMuYWRkRWxlbWVudChuZXcgU3RyaW5nKCIvIikpOwogICAgc3BsaXRFbGVtZW50cy5hZGRFbGVtZW50KG5ldyBTdHJpbmcoIjoiKSk7CiAgICBzcGxpdEVsZW1lbnRzLmFkZEVsZW1lbnQobmV3IFN0cmluZygiLiIpKTsKICAgIHNwbGl0RWxlbWVudHMuYWRkRWxlbWVudChuZXcgU3RyaW5nKCIsIikpOwogICAgYm9vbGVhbiBjb250YWluQU0gPSBmYWxzZTsKICAgIGJvb2xlYW4gY29udGFpblBNID0gZmFsc2U7CiAgICBpZiAoZm9ybWF0LmluZGV4T2YoIkFNUE0iKSA+IC0xKSB7CiAgICAgIG1hdGNoRGF0ZSA9IG1hdGNoRGF0ZS50b1VwcGVyQ2FzZSgpOwogICAgICBtYXRjaERhdGUgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwucmVwbGFjZVdpdGgobWF0Y2hEYXRlLCAiQU0iLCAiIEFNIik7CiAgICAgIG1hdGNoRGF0ZSA9IGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5yZXBsYWNlV2l0aChtYXRjaERhdGUsICJQTSIsICIgUE0iKTsKICAgICAgbWF0Y2hEYXRlID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlcGxhY2VBbGwobWF0Y2hEYXRlLCAiQS5NLiIsICIgQU0iKTsKICAgICAgbWF0Y2hEYXRlID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlcGxhY2VBbGwobWF0Y2hEYXRlLCAiUC5NLiIsICIgUE0iKTsKICAgICAgbWF0Y2hEYXRlID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlcGxhY2VBbGwobWF0Y2hEYXRlLCAiQS5NIiwgIiBBTSIpOwogICAgICBtYXRjaERhdGUgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwucmVwbGFjZUFsbChtYXRjaERhdGUsICJQLk0iLCAiIFBNIik7CiAgICAgIGNvbnRhaW5BTSA9IG1hdGNoRGF0ZS5pbmRleE9mKCJBTSIpID4gLTEgPyB0cnVlIDogZmFsc2U7CiAgICAgIGNvbnRhaW5QTSA9IG1hdGNoRGF0ZS5pbmRleE9mKCJQTSIpID4gLTEgPyB0cnVlIDogZmFsc2U7CiAgICB9CiAgICBWZWN0b3IgZGF0ZUVsZW1lbnRzID0gbmV3IFZlY3RvcigpOwogICAgVmVjdG9yIGZvcm1hdEVsZW1lbnRzID0gbmV3IFZlY3RvcigpOwogICAgdHJ5IHsKICAgICAgRGF0ZSBub3cgPSBuZXcgRGF0ZSgpOwogICAgICBpbnQgeWVhciA9IGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5nZXRSZWFsWWVhcihuZXcgRGF0ZSgpLmdldFllYXIoKSk7CiAgICAgIGludCBtb250aCA9IDA7CiAgICAgIGlmIChmb3JtYXQuaW5kZXhPZigiTU8iKSA9PSAtMSkgbW9udGggPSBub3cuZ2V0TW9udGgoKTsKICAgICAgaW50IGRheSA9IDA7CiAgICAgIGlmIChmb3JtYXQuaW5kZXhPZigiREEiKSA9PSAtMSkgZGF5ID0gbm93LmdldERhdGUoKTsKICAgICAgaW50IGhvdXIgPSAwOwogICAgICBpbnQgbWludXRlID0gMDsKICAgICAgaW50IHNlY29uZHMgPSAwOwogICAgICBkYXRlRWxlbWVudHMgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuc3BsaXRTdHJpbmcobWF0Y2hEYXRlLCBzcGxpdEVsZW1lbnRzKTsKICAgICAgZm9ybWF0RWxlbWVudHMgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuc3BsaXRTdHJpbmcoZm9ybWF0LCAiICIpOwogICAgICBmb3IgKGludCBpID0gMDsgaSA8IGZvcm1hdEVsZW1lbnRzLnNpemUoKTsgaSsrKSB7CiAgICAgICAgU3RyaW5nIGZvcm1hdEVsZW1lbnQgPSAoU3RyaW5nKSBmb3JtYXRFbGVtZW50cy5lbGVtZW50QXQoaSk7CiAgICAgICAgU3RyaW5nIGRhdGVFbGVtZW50ID0gKFN0cmluZykgZGF0ZUVsZW1lbnRzLmVsZW1lbnRBdChpKTsKICAgICAgICBpZiAoZm9ybWF0RWxlbWVudC5lcXVhbHMoIk1PIikpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIG1vbnRoID0gKEludGVnZXIucGFyc2VJbnQoZGF0ZUVsZW1lbnQpIC0gMSk7CiAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBtb250aCA9IChjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuY29udmVydE1vbnRoU3RyaW5nKGRhdGVFbGVtZW50KSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXRFbGVtZW50LmVxdWFscygiREEiKSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZGF5ID0gSW50ZWdlci5wYXJzZUludChkYXRlRWxlbWVudCk7CiAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBkYXkgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuY29udmVydERheVN0cmluZyhkYXRlRWxlbWVudCk7CiAgICAgICAgICAgIGlmIChkYXkgPT0gLTEpIHsKICAgICAgICAgICAgICBkYXRlRWxlbWVudCA9IGRhdGVFbGVtZW50LnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgZGF0ZUVsZW1lbnQgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwucmVtb3ZlRWxlbWVudHMoZGF0ZUVsZW1lbnQsICJTVCIpOwogICAgICAgICAgICAgIGRhdGVFbGVtZW50ID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlbW92ZUVsZW1lbnRzKGRhdGVFbGVtZW50LCAiTkQiKTsKICAgICAgICAgICAgICBkYXRlRWxlbWVudCA9IGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5yZW1vdmVFbGVtZW50cyhkYXRlRWxlbWVudCwgIlJEIik7CiAgICAgICAgICAgICAgZGF0ZUVsZW1lbnQgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwucmVtb3ZlRWxlbWVudHMoZGF0ZUVsZW1lbnQsICJUSCIpOwogICAgICAgICAgICAgIGRhdGVFbGVtZW50ID0gZGF0ZUVsZW1lbnQudHJpbSgpOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBkYXkgPSBJbnRlZ2VyLnBhcnNlSW50KGRhdGVFbGVtZW50KTsKICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZWUpIHsKICAgICAgICAgICAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5kZWJ1ZygKICAgICAgICAgICAgICAgICAgICAiY29udmVydERhdGVTZWNvbmRzQ29ycmVjdCIsCiAgICAgICAgICAgICAgICAgICAgIkNhbm5vdCBmaW5kIGRheSBmb3I6ICIgKyBkYXRlRWxlbWVudCArICIgRVJST1I6IiArIGVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdEVsZW1lbnQuZXF1YWxzKCJZRSIpKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB5ZWFyID0gSW50ZWdlci5wYXJzZUludChkYXRlRWxlbWVudCk7CiAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgfQogICAgICAgICAgLy9pZiAoeWVhciA9PSAwIHx8IHllYXIgPT0gMSB8fCB5ZWFyID09IDIgfHwgeWVhciA9PSAzIHx8IHllYXIgPT0gNCB8fCB5ZWFyID09IDUgfHwgeWVhciA9PSA2IHx8IHllYXIgPT0gNyB8fCB5ZWFyID09IDggfHwgeWVhciA9PSA5IHx8IHllYXIgPT0gMTAgfHwgeWVhciA9PSAxMSB8fCB5ZWFyID09IDEyIHx8IHllYXIgPT0gMTMgfHwgeWVhciA9PSAxNCB8fCB5ZWFyID09IDE1IHx8IHllYXIgPT0gMTYpIHsKICAgICAgICAgIGlmICh5ZWFyIDwgMzApIHsKICAgICAgICAgICAgeWVhciA9IHllYXIgKyAyMDAwOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0RWxlbWVudC5lcXVhbHMoIkhPIikpIHsKICAgICAgICAgIGhvdXIgPSBJbnRlZ2VyLnBhcnNlSW50KGRhdGVFbGVtZW50KTsKICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdEVsZW1lbnQuZXF1YWxzKCJTRSIpKSB7CiAgICAgICAgICBzZWNvbmRzID0gSW50ZWdlci5wYXJzZUludChkYXRlRWxlbWVudCk7CiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXRFbGVtZW50LmVxdWFscygiTUkiKSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbWludXRlID0gSW50ZWdlci5wYXJzZUludChkYXRlRWxlbWVudCk7CiAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBkYXRlRWxlbWVudCA9IGRhdGVFbGVtZW50LnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgIGRhdGVFbGVtZW50ID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlbW92ZUVsZW1lbnRzKGRhdGVFbGVtZW50LCAiUE0iKTsKICAgICAgICAgICAgZGF0ZUVsZW1lbnQgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwucmVtb3ZlRWxlbWVudHMoZGF0ZUVsZW1lbnQsICJBTSIpOwogICAgICAgICAgICBkYXRlRWxlbWVudCA9IGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5yZW1vdmVFbGVtZW50cyhkYXRlRWxlbWVudCwgIlAuTS4iKTsKICAgICAgICAgICAgZGF0ZUVsZW1lbnQgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwucmVtb3ZlRWxlbWVudHMoZGF0ZUVsZW1lbnQsICJBLk0uIik7CiAgICAgICAgICAgIGRhdGVFbGVtZW50ID0gZGF0ZUVsZW1lbnQudHJpbSgpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIG1pbnV0ZSA9IEludGVnZXIucGFyc2VJbnQoZGF0ZUVsZW1lbnQpOwogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZWUpIHsKICAgICAgICAgICAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZGVidWcoCiAgICAgICAgICAgICAgICAgICJjb252ZXJ0RGF0ZVNlY29uZHNDb3JyZWN0IiwKICAgICAgICAgICAgICAgICAgIkNhbiBub3QgZmluZCBtaW51dGVzIGZvcjoiICsgZGF0ZUVsZW1lbnQgKyAiIGVycm9yOiIgKyBlZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXRFbGVtZW50LmVxdWFscygiWCIpKSB7CiAgICAgICAgICAvLyBEbyBub3RoaW5nCiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXRFbGVtZW50LmVxdWFscygiQU1QTSIpKSB7CiAgICAgICAgICAvLyBEbyBub3RoaW5nIGF0IHRoZSBtb21lbnQKICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdEVsZW1lbnQuZXF1YWxzKCJIT01JIikpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGRhdGVFbGVtZW50ID0gZGF0ZUVsZW1lbnQudHJpbSgpOwogICAgICAgICAgICBob3VyID0gSW50ZWdlci5wYXJzZUludChkYXRlRWxlbWVudC5zdWJzdHJpbmcoMCwgMikpOwogICAgICAgICAgICBtaW51dGUgPSBJbnRlZ2VyLnBhcnNlSW50KGRhdGVFbGVtZW50LnN1YnN0cmluZygyLCA0KSk7CiAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZWUpIHsKICAgICAgICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKAogICAgICAgICAgICAgICAgImNvbnZlcnREYXRlU2Vjb25kc0NvcnJlY3QiLAogICAgICAgICAgICAgICAgIkNhbiBub3QgZmluZCBob3VyIGFuZCBtaW51dGVzIGZvcjoiICsgZGF0ZUVsZW1lbnQgKyAiIGVycm9yOiIgKyBlZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlCiAgICAgICAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZGVidWcoCiAgICAgICAgICAgICAgImNvbnZlcnREYXRlU2Vjb25kc0NvcnJlY3QiLCAiVW5zdXBwb3J0ZWQgZm9ybWF0ZWxlbWVudDogIiArIGZvcm1hdEVsZW1lbnQpOwogICAgICB9CiAgICAgIEdyZWdvcmlhbkNhbGVuZGFyIGdjID0gbmV3IEdyZWdvcmlhbkNhbGVuZGFyKFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lKSk7CiAgICAgIGdjLnNldChHcmVnb3JpYW5DYWxlbmRhci5BTV9QTSwgMCk7CiAgICAgIGdjLnNldChHcmVnb3JpYW5DYWxlbmRhci5ZRUFSLCB5ZWFyKTsKICAgICAgZ2Muc2V0KEdyZWdvcmlhbkNhbGVuZGFyLk1PTlRILCBtb250aCk7CiAgICAgIGdjLnNldChHcmVnb3JpYW5DYWxlbmRhci5EQVRFLCBkYXkpOwogICAgICBnYy5zZXQoR3JlZ29yaWFuQ2FsZW5kYXIuSE9VUiwgaG91cik7CiAgICAgIGdjLnNldChHcmVnb3JpYW5DYWxlbmRhci5NSU5VVEUsIG1pbnV0ZSk7CiAgICAgIGdjLnNldChHcmVnb3JpYW5DYWxlbmRhci5TRUNPTkQsIHNlY29uZHMpOwogICAgICBnYy5zZXQoR3JlZ29yaWFuQ2FsZW5kYXIuTUlMTElTRUNPTkQsIDApOwoKICAgICAgRGF0ZSByZXRWYWwgPSBnYy5nZXRUaW1lKCk7CiAgICAgIGlmIChmb3JtYXQuaW5kZXhPZigiQU1QTSIpID4gLTEpIHsKICAgICAgICBpZiAoY29udGFpblBNKSB7CiAgICAgICAgICBpZiAocmV0VmFsLmdldEhvdXJzKCkgIT0gMTIpIHJldFZhbCA9IGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5hZGRIb3VycyhyZXRWYWwsIDEyKTsKICAgICAgICB9CiAgICAgICAgaWYgKGNvbnRhaW5BTSkgewogICAgICAgICAgaWYgKHJldFZhbC5nZXRIb3VycygpID09IDEyKSByZXRWYWwgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuYWRkSG91cnMocmV0VmFsLCAtMTIpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmV0VmFsOwoKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5kZWJ1ZygKICAgICAgICAgICJjb252ZXJ0RGF0ZVNlY29uZHNDb3JyZWN0IiwKICAgICAgICAgICJtYXRjaERhdGU6ICIKICAgICAgICAgICAgICArIG1hdGNoRGF0ZQogICAgICAgICAgICAgICsgIiBmb3JtYXQ6ICIKICAgICAgICAgICAgICArIGZvcm1hdAogICAgICAgICAgICAgICsgIiBzcGxpdCBlbGVtZW50czogIgogICAgICAgICAgICAgICsgc3BsaXRFbGVtZW50cy50b1N0cmluZygpCiAgICAgICAgICAgICAgKyAiIGRhdGVlbGVtZW50OiAiCiAgICAgICAgICAgICAgKyBkYXRlRWxlbWVudHMudG9TdHJpbmcoKQogICAgICAgICAgICAgICsgIiBmb3JtYXRlbGVtZW50czogIgogICAgICAgICAgICAgICsgZm9ybWF0RWxlbWVudHMudG9TdHJpbmcoKQogICAgICAgICAgICAgICsgIiBmYWlsZWQ6IgogICAgICAgICAgICAgICsgZSk7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBpc0RhdGVJblJhbmdlKERhdGUgc291cmNlRGF0ZSwgbG9uZyBtYXhEYXlzQWdvLCBsb25nIG1pbkRheXNBZ28pIHsKICAgIGlmICgobmV3IERhdGUoKS5nZXRUaW1lKCkgLSAoc291cmNlRGF0ZS5nZXRUaW1lKCkgKyAxMDAwICogNjAgKiA2MCAqIDI0TCAqIG1pbkRheXNBZ28pKSA+IDAKICAgICAgICAmJiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSAoc291cmNlRGF0ZS5nZXRUaW1lKCkgKyAxMDAwICogNjAgKiA2MCAqIDI0TCAqIG1heERheXNBZ28pKQogICAgICAgICAgICA8IDApIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlOwogIH0KCiAgcHVibGljIHN0YXRpYyBEYXRlIGFkanVzdEZvckNvcnJlY3RZZWFyKAogICAgICBEYXRlIHRoZURhdGUsIGxvbmcgYWRkWWVhck9uTW9udGhzQmVmb3JlLCBsb25nW10gY2hlY2tZZWFyc0Zvck1vbnRocykgewogICAgdHJ5IHsKICAgICAgaWYgKFV0aWw0LmdldElzTG9uZ0luQXJyYXkoY2hlY2tZZWFyc0Zvck1vbnRocywgbmV3IERhdGUoKS5nZXRNb250aCgpICsgMSkpIHsKICAgICAgICBpZiAodGhlRGF0ZS5nZXRNb250aCgpIDwgYWRkWWVhck9uTW9udGhzQmVmb3JlKSB7CiAgICAgICAgICB0aGVEYXRlLnNldFllYXIobmV3IERhdGUoKS5nZXRZZWFyKCkgKyAxKTsKICAgICAgICAgIHJldHVybiB0aGVEYXRlOwogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJhZGp1c3RGb3JDb3JyZWN0WWVhciIsICJGYWlsZWQ6IiArIGUpOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICBwdWJsaWMgc3RhdGljIERhdGUgYWRqdXN0TWF0Y2hEYXRlVGVtcE5ld1llYXIoCiAgICAgIERhdGUgZGF0ZU9mTWF0Y2gsIGxvbmcgYWRkWWVhck9uTW9udGhzQmVmb3JlLCBsb25nW10gY2hlY2tZZWFyZHNGb3JNb250aHMpIHsKICAgIERhdGUgcmV0VmFsID0gbnVsbDsKICAgIERhdGUgdGVtcCA9CiAgICAgICAgVXRpbDQuYWRqdXN0Rm9yQ29ycmVjdFllYXIoZGF0ZU9mTWF0Y2gsIGFkZFllYXJPbk1vbnRoc0JlZm9yZSwgY2hlY2tZZWFyZHNGb3JNb250aHMpOwogICAgaWYgKHRlbXAgIT0gbnVsbCkgewogICAgICByZXRWYWwgPSB0ZW1wOwogICAgICBkYXRlT2ZNYXRjaCA9IHRlbXA7CiAgICB9CiAgICBpZiAoVXRpbDQuaXNEYXRlSW5SYW5nZShkYXRlT2ZNYXRjaCwgMzY2LCAzNDApKSB7CiAgICAgIGlmIChyZXRWYWwgPT0gbnVsbCkgewogICAgICAgIHJldFZhbCA9IGRhdGVPZk1hdGNoOwogICAgICAgIHJldFZhbC5zZXRZZWFyKGRhdGVPZk1hdGNoLmdldFllYXIoKSArIDEpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmV0VmFsOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmdCdWZmZXIgY29udmVydFZlY3RvclRvU3RyaW5nQnVmZmVyKFZlY3RvciBzb3VyY2UsIFN0cmluZyBzZXBhcmF0b3IpIHsKICAgIFN0cmluZ0J1ZmZlciByZXRWYWwgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICB0cnkgewogICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNvdXJjZS5zaXplKCk7IGkrKykgewogICAgICAgIHJldFZhbC5hcHBlbmQobmV3IFN0cmluZygoU3RyaW5nKSBzb3VyY2UuZWxlbWVudEF0KGkpKSArIHNlcGFyYXRvcik7CiAgICAgIH0KICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICB9CiAgICByZXR1cm4gcmV0VmFsOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgY29udmVydERhdGVUb1N0cmluZyhEYXRlIHNvdXJjZSkgewogICAgcmV0dXJuIChzb3VyY2UuZ2V0RGF0ZSgpKQogICAgICAgICsgIi0iCiAgICAgICAgKyAoc291cmNlLmdldE1vbnRoKCkgKyAxKQogICAgICAgICsgIi0iCiAgICAgICAgKyAoc291cmNlLmdldFllYXIoKSArIDE5MDApCiAgICAgICAgKyAiICIKICAgICAgICArIHNvdXJjZS5nZXRIb3VycygpCiAgICAgICAgKyAiOiIKICAgICAgICArIHNvdXJjZS5nZXRNaW51dGVzKCk7CiAgfQoKICBwdWJsaWMgc3RhdGljIGphdmEuc3FsLlRpbWVzdGFtcCBnZXREYXRlU2FmZShSZXN1bHRTZXQgcnMsIFN0cmluZyBhdHRyaWJ1dGVOYW1lKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gbmV3IGphdmEuc3FsLlRpbWVzdGFtcCgKICAgICAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5jb252ZXJ0RGF0ZVNlY29uZHMoCiAgICAgICAgICAgICAgICAgIHJzLmdldFN0cmluZyhhdHRyaWJ1dGVOYW1lKSwgIllFIE1PIERBIEhPIE1JIFNFIikKICAgICAgICAgICAgICAuZ2V0VGltZSgpKTsKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5kZWJ1ZygiZ2V0RGF0ZVNhZmUiLCAiRmFpbGVkOiIgKyBlKTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgcHVibGljIHN0YXRpYyB2b2lkIGJvYmJsZVNvcnQoVmVjdG9yIHNvdXJjZSkgewogICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7CiAgICAgIENvbGxhdG9yIG15Tm9yd2VnaWFuQ29sbGF0b3IgPSBDb2xsYXRvci5nZXRJbnN0YW5jZShMb2NhbGUuRU5HTElTSCk7CiAgICAgIGZvciAoaW50IGEgPSAwOyBhIDwgc291cmNlLnNpemUoKTsgYSsrKSB7CiAgICAgICAgZm9yIChpbnQgYiA9IDA7IGIgPCBzb3VyY2Uuc2l6ZSgpOyBiKyspIHsKICAgICAgICAgIE9iamVjdCBvMSA9IChPYmplY3QpIHNvdXJjZS5lbGVtZW50QXQoYSk7CiAgICAgICAgICBPYmplY3QgbzIgPSAoT2JqZWN0KSBzb3VyY2UuZWxlbWVudEF0KGIpOwogICAgICAgICAgaWYgKG15Tm9yd2VnaWFuQ29sbGF0b3IuY29tcGFyZShvMS50b1N0cmluZygpLCBvMS50b1N0cmluZygpKSA8IDApCiAgICAgICAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5zd2FwKHNvdXJjZSwgYSwgYik7CiAgICAgICAgfSAvLyBiCiAgICAgIH0gLy8gYQogICAgfQogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgZ2V0TmljZURvdWJsZShkb3VibGUgdmFsdWUsIGludCBudW1iZXJzKSB7CiAgICBTdHJpbmcgcmV0VmFsID0gbmV3IERvdWJsZSh2YWx1ZSkudG9TdHJpbmcoKTsKICAgIGlmIChyZXRWYWwubGVuZ3RoKCkgPCBudW1iZXJzKSB7CiAgICAgIGZvciAoaW50IGkgPSByZXRWYWwubGVuZ3RoKCk7IGkgPCBudW1iZXJzOyBpKyspIHsKICAgICAgICByZXRWYWwgPSByZXRWYWwgKyAiMCI7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXRWYWw7CiAgfQoKICBwdWJsaWMgc3RhdGljIGxvbmcgZ2V0TW9zdENvbW1vblZhbHVlKFZlY3RvciBzb3VyY2UpIHsKICAgIGxvbmcgbW9zdENvbW1vblZhbHVlID0gLTE7CiAgICBsb25nIHRlbXBNb3N0Q29tbW9uQ291bnQgPSAwOwogICAgbG9uZyBtb3N0Q29tbW9uQ291bnQgPSAwOwogICAgbG9uZyBsYXN0VmFsdWUgPSAtMTsKCiAgICBpZiAoc291cmNlICE9IG51bGwgJiYgc291cmNlLnNpemUoKSA+IDApIHsKICAgICAgbGFzdFZhbHVlID0gKChMb25nKSBzb3VyY2UuZWxlbWVudEF0KDApKS5sb25nVmFsdWUoKTsKICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzb3VyY2Uuc2l6ZSgpOyBpKyspIHsKICAgICAgICBsb25nIHRlbXAgPSAoKExvbmcpIHNvdXJjZS5lbGVtZW50QXQoaSkpLmxvbmdWYWx1ZSgpOwogICAgICAgIGlmICh0ZW1wICE9IGxhc3RWYWx1ZSkgewogICAgICAgICAgaWYgKHRlbXBNb3N0Q29tbW9uQ291bnQgPiBtb3N0Q29tbW9uQ291bnQpIHsKICAgICAgICAgICAgbW9zdENvbW1vbkNvdW50ID0gdGVtcE1vc3RDb21tb25Db3VudDsKICAgICAgICAgICAgbW9zdENvbW1vblZhbHVlID0gbGFzdFZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE1vc3RDb21tb25Db3VudCA9IDA7CiAgICAgICAgfSAvLyBpZiB0ZW1wIT1sYXN0VmFsdWUKICAgICAgICB0ZW1wTW9zdENvbW1vbkNvdW50Kys7CiAgICAgIH0gLy8gZm9yCiAgICB9IC8vIGlmCiAgICBpZiAodGVtcE1vc3RDb21tb25Db3VudCA+IG1vc3RDb21tb25Db3VudCkgbW9zdENvbW1vblZhbHVlID0gbGFzdFZhbHVlOwoKICAgIHJldHVybiBtb3N0Q29tbW9uVmFsdWU7CiAgfQoKICBwdWJsaWMgc3RhdGljIFN0cmluZyBwdXRIVE1MVGFncyhTdHJpbmcgc291cmNlKSB7CiAgICAvKiAgICB3aGlsZShzb3VyY2UuaW5kZXhPZigKICAgICAgICAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBjaGFyVG9FbnRpdHkoY2hhciBjaCl7CiAgICBzd2l0Y2goY2gpewogICAgY2FzZSAnIic6CiAgICAgICAgcmV0dXJuICImcXVvdDsiOwogICAgY2FzZSAnJic6CiAgICAgICAgcmV0dXJuICImYW1wOyI7CiAgICBjYXNlICc8JzoKICAgICAgICByZXR1cm4gIiZsdDsiOwogICAgY2FzZSAnPic6CiAgICAgICAgcmV0dXJuICImZ3Q7IjsKICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuICIiK2NoOyovCiAgICByZXR1cm4gbnVsbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgVmVjdG9yIHJlbW92ZUR1cGxpY2F0ZXMoVmVjdG9yIHNvdXJjZSkgewogICAgVmVjdG9yIHJldFZhbCA9IG5ldyBWZWN0b3IoKTsKICAgIHRyeSB7CiAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc291cmNlLnNpemUoKTsgaSsrKSB7CiAgICAgICAgU3RyaW5nIHMgPSAoU3RyaW5nKSBzb3VyY2UuZWxlbWVudEF0KGkpOwogICAgICAgIGlmICh2ZWN0b3JDb250YWluKHJldFZhbCwgcykgPT0gZmFsc2UpIHJldFZhbC5hZGRFbGVtZW50KHMpOwogICAgICB9CiAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgfQogICAgcmV0dXJuIHJldFZhbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgT2JqZWN0IGdldE9iamVjdFdpdGhLZXkoSGFzaHRhYmxlIHNvdXJjZSwgU3RyaW5nIGtleSwgYm9vbGVhbiByZXBvcnRFcnJvcikgewogICAgZm9yIChFbnVtZXJhdGlvbiBlID0gc291cmNlLmtleXMoKTsgZS5oYXNNb3JlRWxlbWVudHMoKTsgKSB7CiAgICAgIFN0cmluZyBzb3VyY2VLZXkgPSAoU3RyaW5nKSBlLm5leHRFbGVtZW50KCk7CiAgICAgIGlmIChzb3VyY2VLZXkuZXF1YWxzKGtleSkpIHJldHVybiBzb3VyY2UuZ2V0KHNvdXJjZUtleSk7CiAgICB9CiAgICBpZiAocmVwb3J0RXJyb3IpIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5kZWJ1ZygiZ2V0T2JqZWN0V2l0aEtleSIsICJGYWlsZWQ6ICIgKyBrZXkpOwogICAgcmV0dXJuIG51bGw7CiAgfQoKICBwdWJsaWMgc3RhdGljIE9iamVjdCBnZXRPYmplY3RXaXRoS2V5KEhhc2h0YWJsZSBzb3VyY2UsIGxvbmcga2V5LCBib29sZWFuIHJlcG9ydEVycm9yKSB7CiAgICBmb3IgKEVudW1lcmF0aW9uIGUgPSBzb3VyY2Uua2V5cygpOyBlLmhhc01vcmVFbGVtZW50cygpOyApIHsKICAgICAgTG9uZyBzb3VyY2VLZXkgPSAoTG9uZykgZS5uZXh0RWxlbWVudCgpOwogICAgICBpZiAoc291cmNlS2V5LmxvbmdWYWx1ZSgpID09IGtleSkgcmV0dXJuIHNvdXJjZS5nZXQoc291cmNlS2V5KTsKICAgIH0KICAgIGlmIChyZXBvcnRFcnJvcikgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJnZXRPYmplY3RXaXRoS2V5IiwgIkZhaWxlZDogIiArIGtleSk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nQnVmZmVyIGdlbmVyYXRlSW5mb3JtYXRpb24oSGFzaHRhYmxlIHNvdXJjZSwgU3RyaW5nIGluZm9ybWF0aW9uS2V5cykgewogICAgU3RyaW5nQnVmZmVyIHJldFZhbCA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgIGZvciAoRW51bWVyYXRpb24gZSA9IHNvdXJjZS5rZXlzKCk7IGUuaGFzTW9yZUVsZW1lbnRzKCk7ICkgewogICAgICBTdHJpbmcgc291cmNlS2V5ID0gKFN0cmluZykgZS5uZXh0RWxlbWVudCgpOwogICAgICByZXRWYWwuYXBwZW5kKGluZm9ybWF0aW9uS2V5cyk7CiAgICAgIHJldFZhbC5hcHBlbmQoc291cmNlS2V5ICsgIlxuIik7CiAgICAgIFZlY3RvciB0ZWFtcyA9IChWZWN0b3IpIHNvdXJjZS5nZXQoc291cmNlS2V5KTsKICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0ZWFtcy5zaXplKCk7IGkrKykgewogICAgICAgIHJldFZhbC5hcHBlbmQoKFN0cmluZykgdGVhbXMuZWxlbWVudEF0KGkpICsgIlxuIik7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXRWYWw7CiAgfQoKICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gc2F2ZUNhdGVnb3JpZXNBbmRUZWFtc1RvRmlsZShIYXNodGFibGUgc291cmNlLCBTdHJpbmcgZmlsZW5hbWUpIHsKICAgIFN0cmluZ0J1ZmZlciBmaWxlQ29udGVudCA9IGdlbmVyYXRlSW5mb3JtYXRpb24oc291cmNlLCBORVdfQ0FURUdPUlkpOwogICAgcmV0dXJuIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5zYXZlU3RyaW5nQnVmZmVyVG9GaWxlKGZpbGVuYW1lLCBmaWxlQ29udGVudCk7CiAgfQoKICBwdWJsaWMgc3RhdGljIEhhc2h0YWJsZSBsb2FkQ2F0ZWdvcmllc0FuZFRlYW1zRnJvbUZpbGUoU3RyaW5nIGZpbGVuYW1lKSB7CiAgICBIYXNodGFibGUgcmV0VmFsID0gbmV3IEhhc2h0YWJsZSgpOwogICAgUmFuZG9tQWNjZXNzRmlsZSByYWYgPSBudWxsOwogICAgdHJ5IHsKICAgICAgcmFmID0gbmV3IFJhbmRvbUFjY2Vzc0ZpbGUobmV3IEZpbGUoZmlsZW5hbWUpLCAiciIpOwogICAgICBTdHJpbmcgZmlsZUxpbmUgPSByYWYucmVhZExpbmUoKTsKICAgICAgVmVjdG9yIGN1cnJlbnRUZWFtcyA9IG51bGw7CiAgICAgIHdoaWxlIChmaWxlTGluZSAhPSBudWxsKSB7CiAgICAgICAgaWYgKGZpbGVMaW5lLmluZGV4T2YoTkVXX0NBVEVHT1JZKSA9PSAwKSB7CiAgICAgICAgICBWZWN0b3IgdGVhbXMgPSBuZXcgVmVjdG9yKCk7CiAgICAgICAgICBTdHJpbmcgY2F0ZWdvcnlOYW1lID0gZmlsZUxpbmUuc3Vic3RyaW5nKDEzLCBmaWxlTGluZS5sZW5ndGgoKSk7CiAgICAgICAgICByZXRWYWwucHV0KGNhdGVnb3J5TmFtZSwgdGVhbXMpOwogICAgICAgICAgY3VycmVudFRlYW1zID0gdGVhbXM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1cnJlbnRUZWFtcy5hZGRFbGVtZW50KGZpbGVMaW5lLnRvVXBwZXJDYXNlKCkpOwogICAgICAgIH0KICAgICAgICBmaWxlTGluZSA9IHJhZi5yZWFkTGluZSgpOwogICAgICB9CgogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJsb2FkQ2F0ZWdvcmllc0FuZFRlYW1zRnJvbUZpbGUiLCAiRmFpbGVkOiAiICsgZSk7CiAgICB9IGZpbmFsbHkgewogICAgICB0cnkgewogICAgICAgIHJhZi5jbG9zZSgpOwogICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmV0VmFsOwogIH0KCgoKICBwdWJsaWMgc3RhdGljIFN0cmluZyBnZXROaWNlRG91YmxlKGRvdWJsZSBzb3VyY2UpIHsKICAgIFN0cmluZyByZXRWYWwgPSBuZXcgRG91YmxlKHNvdXJjZSkudG9TdHJpbmcoKTsKICAgIGlmIChyZXRWYWwuaW5kZXhPZigiLiIpID09IHJldFZhbC5sZW5ndGgoKSAtIDIpIHJldFZhbCA9IHJldFZhbCArICIwIjsKICAgIHJldHVybiByZXRWYWw7CiAgfQoKICBwdWJsaWMgc3RhdGljIFZlY3RvciBnZXRGaWxlc0luRGlyZWN0b3J5KFN0cmluZyBkaXJlY3RvcnksIGJvb2xlYW4gZnVsbHBhdGgpIHsKICAgIFZlY3RvciByZXRWYWwgPSBuZXcgVmVjdG9yKCk7CiAgICB0cnkgewogICAgICBGaWxlIGYgPSBuZXcgRmlsZShkaXJlY3RvcnkpOwogICAgICBGaWxlW10gbGlzdEZpbGVzID0gZi5saXN0RmlsZXMoKTsKICAgICAgaWYgKGxpc3RGaWxlcyAhPSBudWxsKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsaXN0RmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIEZpbGUgYUZpbGUgPSBsaXN0RmlsZXNbaV07CiAgICAgICAgICBpZiAoYUZpbGUuaXNGaWxlKCkpIHsKICAgICAgICAgICAgaWYgKGZ1bGxwYXRoID09IHRydWUpIHJldFZhbC5hZGRFbGVtZW50KGFGaWxlLmdldEFic29sdXRlUGF0aCgpKTsKICAgICAgICAgICAgZWxzZSByZXRWYWwuYWRkRWxlbWVudChhRmlsZS5nZXROYW1lKCkpOwogICAgICAgICAgfQogICAgICAgIH0gLy8gZm9yCiAgICAgIH0gLy8gaWYKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5kZWJ1ZygiZ2V0RmlsZXNJbkRpcmVjdG9yeSIsICJGYWlsZWQ6ICIgKyBlKTsKICAgIH0KICAgIHJldHVybiByZXRWYWw7CiAgfQoKICBwdWJsaWMgc3RhdGljIFZlY3RvciBnZXRGaWxlc0luRGlyZWN0b3J5KAogICAgICBTdHJpbmcgZGlyZWN0b3J5LAogICAgICBib29sZWFuIGZ1bGxwYXRoLAogICAgICBib29sZWFuIGluY2x1ZGVGaWxlcywKICAgICAgYm9vbGVhbiBpbmNsdWRlRGlyZWN0b3JpZXMsCiAgICAgIGJvb2xlYW4gZ2V0RmlsZU9iamVjdCkgewogICAgVmVjdG9yIHJldFZhbCA9IG5ldyBWZWN0b3IoKTsKICAgIHRyeSB7CiAgICAgIEZpbGUgZiA9IG5ldyBGaWxlKGRpcmVjdG9yeSk7CiAgICAgIEZpbGVbXSBsaXN0RmlsZXMgPSBmLmxpc3RGaWxlcygpOwogICAgICBpZiAobGlzdEZpbGVzICE9IG51bGwpIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxpc3RGaWxlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgRmlsZSBhRmlsZSA9IGxpc3RGaWxlc1tpXTsKICAgICAgICAgIGlmIChhRmlsZS5pc0ZpbGUoKSAmJiBpbmNsdWRlRmlsZXMgPT0gdHJ1ZSkgewogICAgICAgICAgICBpZiAoZ2V0RmlsZU9iamVjdCA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgcmV0VmFsLmFkZEVsZW1lbnQoYUZpbGUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGZ1bGxwYXRoID09IHRydWUpIHJldFZhbC5hZGRFbGVtZW50KGFGaWxlLmdldEFic29sdXRlUGF0aCgpKTsKICAgICAgICAgICAgZWxzZSByZXRWYWwuYWRkRWxlbWVudChhRmlsZS5nZXROYW1lKCkpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFGaWxlLmlzRGlyZWN0b3J5KCkgJiYgaW5jbHVkZURpcmVjdG9yaWVzID09IHRydWUpIHsKICAgICAgICAgICAgaWYgKGdldEZpbGVPYmplY3QgPT0gdHJ1ZSkgewogICAgICAgICAgICAgIHJldFZhbC5hZGRFbGVtZW50KGFGaWxlKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChmdWxscGF0aCA9PSB0cnVlKSByZXRWYWwuYWRkRWxlbWVudChhRmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSk7CiAgICAgICAgICAgIGVsc2UgcmV0VmFsLmFkZEVsZW1lbnQoYUZpbGUuZ2V0TmFtZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGZvcgogICAgICB9IC8vIGlmCiAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZGVidWcoImdldEZpbGVzSW5EaXJlY3RvcnkiLCAiRmFpbGVkOiAiICsgZSk7CiAgICB9CiAgICByZXR1cm4gcmV0VmFsOwogIH0KCiAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZUZpbGVzSW5EaXJlY3RvcnkoU3RyaW5nIGRpcmVjdG9yeSkgewogICAgVmVjdG9yIGZpbGVzSW5EaXJlY3RvcnkgPSBVdGlsNC5nZXRGaWxlc0luRGlyZWN0b3J5KGRpcmVjdG9yeSwgdHJ1ZSk7CiAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZGVidWcoCiAgICAgICAgImRlbGV0ZUZpbGVzSW5EaXJlY3RvcnkiLAogICAgICAgICIjZmlsZXMgaW4gZGlyZWN0b3J5KCIgKyBkaXJlY3RvcnkgKyAiKSB0byBkZWxldGU6ICIgKyBmaWxlc0luRGlyZWN0b3J5LnNpemUoKSk7CiAgICBmb3IgKGludCBqID0gMDsgaiA8IGZpbGVzSW5EaXJlY3Rvcnkuc2l6ZSgpOyBqKyspIHsKICAgICAgdHJ5IHsKICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSAoU3RyaW5nKSBmaWxlc0luRGlyZWN0b3J5LmVsZW1lbnRBdChqKTsKICAgICAgICBGaWxlIGYgPSBuZXcgRmlsZShmaWxlTmFtZSk7CiAgICAgICAgZi5kZWxldGUoKTsKICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZGVidWcoImRlbGV0ZUZpbGVzSW5EaXJlY3RvcnkiLCAiRGVsZXRpbmcgZmFpbGVkOiIgKyBlKTsKICAgICAgfQogICAgfQogIH0KCiAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZUZpbGVzSW5EaXJlY3RvcnkoU3RyaW5nIGRpcmVjdG9yeSwgU3RyaW5nW10gZXhjZXB0RmlsZXMpIHsKICAgIFZlY3RvciBmaWxlc0luRGlyZWN0b3J5ID0gVXRpbDQuZ2V0RmlsZXNJbkRpcmVjdG9yeShkaXJlY3RvcnksIHRydWUpOwogICAgZm9yIChpbnQgaiA9IDA7IGogPCBmaWxlc0luRGlyZWN0b3J5LnNpemUoKTsgaisrKSB7CiAgICAgIHRyeSB7CiAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gKFN0cmluZykgZmlsZXNJbkRpcmVjdG9yeS5lbGVtZW50QXQoaik7CiAgICAgICAgRmlsZSBmID0gbmV3IEZpbGUoZmlsZU5hbWUpOwogICAgICAgIEZpbGUgY2Fubm9uaWNhbEZpbGUgPSBmLmdldENhbm9uaWNhbEZpbGUoKTsKICAgICAgICBib29sZWFuIGRvRGVsZXRlID0gdHJ1ZTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGV4Y2VwdEZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoY2Fubm9uaWNhbEZpbGUuZ2V0TmFtZSgpLmVxdWFscyhleGNlcHRGaWxlc1tpXSkpIHsKICAgICAgICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKAogICAgICAgICAgICAgICAgImRlbGV0ZUZpbGVzSW5EaXJlY3RvcnkiLCAiRG8gbm90IGRlbGV0ZToiICsgZXhjZXB0RmlsZXNbaV0pOwogICAgICAgICAgICBkb0RlbGV0ZSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZG9EZWxldGUpIHsKICAgICAgICAgIGYuZGVsZXRlKCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5kZWJ1ZygiZGVsZXRlRmlsZXNJbkRpcmVjdG9yeSIsICJEZWxldGluZyBmYWlsZWQ6IiArIGUpOwogICAgICB9CiAgICB9CiAgfQoKICBwdWJsaWMgc3RhdGljIGRvdWJsZSBjb252ZXJ0VG9Eb3VibGUoU3RyaW5nIGFEb3VibGVTdHJpbmcpIHsKICAgIGRvdWJsZSByZXRWYWwgPSAtMTsKICAgIHdoaWxlIChhRG91YmxlU3RyaW5nLmluZGV4T2YoIiwiKSAhPSAtMSkgewogICAgICBhRG91YmxlU3RyaW5nID0gYURvdWJsZVN0cmluZy5yZXBsYWNlKCcsJywgJy4nKTsKICAgIH0KICAgIHRyeSB7CiAgICAgIHJldFZhbCA9IERvdWJsZS5wYXJzZURvdWJsZShhRG91YmxlU3RyaW5nKTsKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICB9CiAgICByZXR1cm4gcmV0VmFsOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgcmVtb3ZlQVNDSUlVbmRlcjMyKFN0cmluZyBzb3VyY2UpIHsKICAgIFN0cmluZyByZXRWYWwgPSBuZXcgU3RyaW5nKCk7CiAgICBpZiAoc291cmNlICE9IG51bGwgJiYgc291cmNlLmxlbmd0aCgpID4gMCkgewogICAgICBjaGFyIGM7CiAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aCgpOyBpKyspIHsKICAgICAgICBjID0gc291cmNlLmNoYXJBdChpKTsKICAgICAgICBpZiAoKGludCkgYyA+PSAzMikgcmV0VmFsID0gcmV0VmFsICsgYzsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJldFZhbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHJlbW92ZUFTQ0lJQ2hhckJldHdlZW4oU3RyaW5nIHNvdXJjZSwgaW50IGZyb21BU0NJSSwgaW50IHRvQVNDSUkpIHsKICAgIFN0cmluZ0J1ZmZlciByZXRWYWwgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICBpZiAoc291cmNlICE9IG51bGwgJiYgc291cmNlLmxlbmd0aCgpID4gMCkgewogICAgICBjaGFyIGM7CiAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aCgpOyBpKyspIHsKICAgICAgICBjID0gc291cmNlLmNoYXJBdChpKTsKICAgICAgICBpbnQgdmFsID0gKGludCkgYzsKICAgICAgICBpZiAodmFsIDwgZnJvbUFTQ0lJIHx8IHZhbCA+IHRvQVNDSUkpIHJldFZhbC5hcHBlbmQoYyk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXRWYWwudG9TdHJpbmcoKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHJlcGxhY2VBU0NJSVVuZGVyKFN0cmluZyBzb3VyY2UsIGludCBhc2NpaW1pbiwgU3RyaW5nIHJlcGxhY2VTdHJpbmcpIHsKICAgIFN0cmluZ0J1ZmZlciByZXRWYWwgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICBpZiAoc291cmNlICE9IG51bGwgJiYgc291cmNlLmxlbmd0aCgpID4gMCkgewogICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGgoKTsgaSsrKSB7CiAgICAgICAgY2hhciBjID0gc291cmNlLmNoYXJBdChpKTsKICAgICAgICBpZiAoKGludCkgYyA+PSBhc2NpaW1pbikgewogICAgICAgICAgcmV0VmFsLmFwcGVuZChjKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0VmFsLmFwcGVuZChyZXBsYWNlU3RyaW5nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXRWYWwudG9TdHJpbmcoKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHJlbW92ZUJldHdlZW5Db3JyZWN0KAogICAgICBTdHJpbmcgc291cmNlLAogICAgICBTdHJpbmcgY29uZGl0aW9uMSwKICAgICAgU3RyaW5nIGNvbmRpdGlvbjIsCiAgICAgIFN0cmluZ1tdIGV4Y2VwdElmU3RhcnRzV2l0aCwKICAgICAgU3RyaW5nW10gZXhjZXB0SWZFcXVhbCkgewogICAgaW50IHJ1bnMgPSAwOwogICAgdHJ5IHsKICAgICAgU3RyaW5nIG5vdFJlbW92ZVRleHQgPSAiIjsKICAgICAgU3RyaW5nIHRlbXAgPSBzb3VyY2U7CiAgICAgIHdoaWxlICh0ZW1wLmluZGV4T2YoY29uZGl0aW9uMSkgIT0gLTEKICAgICAgICAgICYmIHRlbXAuaW5kZXhPZihjb25kaXRpb24yKSAhPSAtMQogICAgICAgICAgJiYgKHRlbXAuaW5kZXhPZihjb25kaXRpb24xKSA8IHRlbXAuaW5kZXhPZihjb25kaXRpb24yKSkpIHsKICAgICAgICBydW5zKys7CiAgICAgICAgaWYgKHJ1bnMgPiAxMCkgewogICAgICAgICAgcmV0dXJuICJyZW1vdmVCZXR3ZWVuQ29ycmVjdCBmYWlsZWQ6ICIgKyBzb3VyY2U7CiAgICAgICAgfQogICAgICAgIFN0cmluZyB0ZW1wMiA9IHRlbXAuc3Vic3RyaW5nKDAsIHRlbXAuaW5kZXhPZihjb25kaXRpb24xKSk7CiAgICAgICAgU3RyaW5nIHRlbXAzID0gdGVtcC5zdWJzdHJpbmcodGVtcC5pbmRleE9mKGNvbmRpdGlvbjIpICsgMSwgdGVtcC5sZW5ndGgoKSk7CiAgICAgICAgdGVtcDIgPSB0ZW1wMi50cmltKCk7CiAgICAgICAgYm9vbGVhbiBkb1JlbW92ZSA9IHRydWU7CiAgICAgICAgU3RyaW5nIHRlc3RDb25kaXRpb24gPQogICAgICAgICAgICB0ZW1wLnN1YnN0cmluZyh0ZW1wLmluZGV4T2YoY29uZGl0aW9uMSksIHRlbXAuaW5kZXhPZihjb25kaXRpb24yKSArIDEpOwogICAgICAgIGlmIChleGNlcHRJZlN0YXJ0c1dpdGggIT0gbnVsbCAmJiB0ZXN0Q29uZGl0aW9uICE9IG51bGwpIHsKICAgICAgICAgIFN0cmluZyB0ZXN0Q29uZGl0aW9uMiA9CiAgICAgICAgICAgICAgdGVzdENvbmRpdGlvbi5zdWJzdHJpbmcoCiAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbjEubGVuZ3RoKCksCiAgICAgICAgICAgICAgICAgIHRlc3RDb25kaXRpb24ubGVuZ3RoKCkgLSBjb25kaXRpb24xLmxlbmd0aCgpIC0gY29uZGl0aW9uMi5sZW5ndGgoKSArIDEpOwogICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBleGNlcHRJZlN0YXJ0c1dpdGgubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKHRlc3RDb25kaXRpb24yLnRyaW0oKS5zdGFydHNXaXRoKGV4Y2VwdElmU3RhcnRzV2l0aFtqXSkgPT0gdHJ1ZSkgewogICAgICAgICAgICAgIGRvUmVtb3ZlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGV4Y2VwdElmRXF1YWwgIT0gbnVsbCAmJiB0ZXN0Q29uZGl0aW9uICE9IG51bGwpIHsKICAgICAgICAgIFN0cmluZyB0ZXN0RXF1YWwgPQogICAgICAgICAgICAgIHRlc3RDb25kaXRpb24uc3Vic3RyaW5nKAogICAgICAgICAgICAgICAgICBjb25kaXRpb24xLmxlbmd0aCgpLAogICAgICAgICAgICAgICAgICB0ZXN0Q29uZGl0aW9uLmxlbmd0aCgpIC0gY29uZGl0aW9uMS5sZW5ndGgoKSAtIGNvbmRpdGlvbjIubGVuZ3RoKCkgKyAxKTsKICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgZXhjZXB0SWZFcXVhbC5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAodGVzdEVxdWFsLnRyaW0oKS5lcXVhbHMoZXhjZXB0SWZFcXVhbFtqXSkgPT0gdHJ1ZSkgewogICAgICAgICAgICAgIGRvUmVtb3ZlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGdldElzSGFuZGljYXBJblBhcmFudGVzKHRlc3RDb25kaXRpb24pKSB7CiAgICAgICAgICBkb1JlbW92ZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoZG9SZW1vdmUgPT0gZmFsc2UpIHsKICAgICAgICAgIG5vdFJlbW92ZVRleHQgPSBub3RSZW1vdmVUZXh0ICsgIiAiICsgdGVzdENvbmRpdGlvbjsKICAgICAgICB9CiAgICAgICAgdGVtcDIgPSB0ZW1wMi50cmltKCk7CiAgICAgICAgaWYgKHRlbXAzICE9IG51bGwpIHsKICAgICAgICAgIHRlbXAzID0gdGVtcDMudHJpbSgpOwogICAgICAgICAgdGVtcDIgPSB0ZW1wMiArICcgJyArIHRlbXAzOwogICAgICAgIH0KICAgICAgICB0ZW1wID0gdGVtcDI7CiAgICAgIH0KICAgICAgaWYgKG5vdFJlbW92ZVRleHQgIT0gbnVsbCkgdGVtcCA9IHRlbXAgKyAiICIgKyBub3RSZW1vdmVUZXh0OwogICAgICByZXR1cm4gdGVtcDsKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5kZWJ1ZygicmVtb3ZlQmV0d2VlbkNvcnJlY3QiLCAiRmFpbGVkOiIgKyBlKTsKICAgIH0KICAgIHJldHVybiBzb3VyY2U7CiAgfQoKICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gZ2V0SXNIYW5kaWNhcEluUGFyYW50ZXMoU3RyaW5nIHRleHQpIHsKICAgIHRyeSB7CiAgICAgIHRleHQgPQogICAgICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlcGxhY2VBbGxDb3JyZWN0KHRleHQudG9VcHBlckNhc2UoKSwgIiZOQlNQOyIsICIiLCBmYWxzZSkKICAgICAgICAgICAgICAudHJpbSgpOwogICAgICBpZiAodGV4dC5sZW5ndGgoKSA+IDYpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgRXh0cmFjdGVkTnVtYmVycyBlbiA9IEV4dHJhY3RlZE51bWJlcnMuZXh0cmFjdE51bWJlcnNGcm9tVGV4dENvcnJlY3QodGV4dCk7CiAgICAgIGlmIChlbi5nZXROdW1iZXJPZk51bWJlcnNFeHRyYWN0ZWQoKSA9PSAxKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIFN0cmluZyB0ZW1wID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlbW92ZUVsZW1lbnRzKHRleHQsICIrIik7CiAgICAgICAgICB0ZW1wID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlbW92ZUVsZW1lbnRzKHRlbXAsICItIikudHJpbSgpOwogICAgICAgICAgaWYgKExvbmcucGFyc2VMb25nKHRlbXApICE9IC0xMDAwMDAwCiAgICAgICAgICAgICAgJiYgKHRleHQuaW5kZXhPZigiKyIpID4gLTEgfHwgdGV4dC5pbmRleE9mKCItIikgPiAtMSkpIHsKICAgICAgICAgICAgLy8gUHJvYmFibHkgKzEgb3IgLTEKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIFN0cmluZyB0ZW1wID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlbW92ZUVsZW1lbnRzKHRleHQsICIrIik7CiAgICAgICAgICB0ZW1wID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnJlbW92ZUVsZW1lbnRzKHRlbXAsICItIikudHJpbSgpOwogICAgICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZSh0ZW1wKSAhPSAtMTAwMDAwCiAgICAgICAgICAgICAgJiYgKHRleHQuaW5kZXhPZigiLiIpID4gLTEgfHwgdGV4dC5pbmRleE9mKCIsIikgPiAtMSkpIHsKICAgICAgICAgICAgLy8gUHJvYmFibHkgNS41IG9yIDMuNAogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlbi5nZXROdW1iZXJPZk51bWJlcnNFeHRyYWN0ZWQoKSA9PSAyKSB7CiAgICAgICAgLyoKICAgICAgICBpZih0ZXh0LmluZGV4T2YgKCI6Iik+LTEpewogICAgICAgICAgLy8gLT4gUHJvYmFibHkgMDoxCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgKi8KICAgICAgfQogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgIH0KICAgIC8vIFByb2JhYmx5IG5vdCBoYW5kaWNhcAogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgcmVtb3ZlQmV0d2VlbkNvcnJlY3QoCiAgICAgIFN0cmluZyBzb3VyY2UsIFN0cmluZyBjb25kaXRpb24xLCBTdHJpbmcgY29uZGl0aW9uMiwgU3RyaW5nW10gZXhjZXB0SWZTdGFydHNXaXRoKSB7CiAgICBpbnQgcnVucyA9IDA7CiAgICB0cnkgewogICAgICBTdHJpbmcgbm90UmVtb3ZlVGV4dCA9ICIiOwogICAgICBTdHJpbmcgdGVtcCA9IHNvdXJjZTsKICAgICAgd2hpbGUgKHRlbXAuaW5kZXhPZihjb25kaXRpb24xKSAhPSAtMQogICAgICAgICAgJiYgdGVtcC5pbmRleE9mKGNvbmRpdGlvbjIpICE9IC0xCiAgICAgICAgICAmJiAodGVtcC5pbmRleE9mKGNvbmRpdGlvbjEpIDwgdGVtcC5pbmRleE9mKGNvbmRpdGlvbjIpKSkgewogICAgICAgIHJ1bnMrKzsKICAgICAgICBpZiAocnVucyA+IDEwKSB7CiAgICAgICAgICByZXR1cm4gInJlbW92ZUJldHdlZW4gZmFpbGVkOiAiICsgc291cmNlOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgdGVtcDIgPSB0ZW1wLnN1YnN0cmluZygwLCB0ZW1wLmluZGV4T2YoY29uZGl0aW9uMSkpOwogICAgICAgIFN0cmluZyB0ZW1wMyA9IHRlbXAuc3Vic3RyaW5nKHRlbXAuaW5kZXhPZihjb25kaXRpb24yKSArIDEsIHRlbXAubGVuZ3RoKCkpOwogICAgICAgIHRlbXAyID0gdGVtcDIudHJpbSgpOwogICAgICAgIGJvb2xlYW4gZG9SZW1vdmUgPSB0cnVlOwogICAgICAgIFN0cmluZyB0ZXN0Q29uZGl0aW9uID0KICAgICAgICAgICAgdGVtcC5zdWJzdHJpbmcodGVtcC5pbmRleE9mKGNvbmRpdGlvbjEpLCB0ZW1wLmluZGV4T2YoY29uZGl0aW9uMikgKyAxKTsKICAgICAgICBpZiAoZXhjZXB0SWZTdGFydHNXaXRoICE9IG51bGwgJiYgdGVzdENvbmRpdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGV4Y2VwdElmU3RhcnRzV2l0aC5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAodGVzdENvbmRpdGlvbi5zdGFydHNXaXRoKGNvbmRpdGlvbjEgKyBleGNlcHRJZlN0YXJ0c1dpdGhbal0pID09IHRydWUpIHsKICAgICAgICAgICAgICBkb1JlbW92ZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vU3lzdGVtLm91dC5wcmludGxuKCJvdXRwdXQ6Iit0ZXN0Q29uZGl0aW9uKyJEb1JlbW92ZToiK2RvUmVtb3ZlKyIgdGVtcDI6Iit0ZW1wMisiIHRlbXAzOiIrdGVtcDMpOwogICAgICAgIGlmIChkb1JlbW92ZSA9PSBmYWxzZSkgewogICAgICAgICAgbm90UmVtb3ZlVGV4dCA9IG5vdFJlbW92ZVRleHQgKyAiICIgKyB0ZXN0Q29uZGl0aW9uOwogICAgICAgIH0KICAgICAgICB0ZW1wMiA9IHRlbXAyLnRyaW0oKTsKICAgICAgICBpZiAodGVtcDMgIT0gbnVsbCkgewogICAgICAgICAgdGVtcDMgPSB0ZW1wMy50cmltKCk7CiAgICAgICAgICB0ZW1wMiA9IHRlbXAyICsgJyAnICsgdGVtcDM7CiAgICAgICAgfQogICAgICAgIHRlbXAgPSB0ZW1wMjsKICAgICAgfQogICAgICBpZiAobm90UmVtb3ZlVGV4dCAhPSBudWxsKSB0ZW1wID0gdGVtcCArICIgIiArIG5vdFJlbW92ZVRleHQ7CiAgICAgIHJldHVybiB0ZW1wOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJyZW1vdmVCZXR3ZWVuIiwgIkZhaWxlZDoiICsgZSk7CiAgICB9CiAgICByZXR1cm4gc291cmNlOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgcmVtb3ZlQmV0d2VlbkNvcnJlY3QoU3RyaW5nIHNvdXJjZSwgU3RyaW5nIGNvbmRpdGlvbjEsIFN0cmluZyBjb25kaXRpb24yKSB7CiAgICBpbnQgcnVucyA9IDA7CiAgICB0cnkgewogICAgICBTdHJpbmcgdGVtcCA9IHNvdXJjZTsKICAgICAgd2hpbGUgKHRlbXAuaW5kZXhPZihjb25kaXRpb24xKSAhPSAtMQogICAgICAgICAgJiYgdGVtcC5pbmRleE9mKGNvbmRpdGlvbjIpICE9IC0xCiAgICAgICAgICAmJiAodGVtcC5pbmRleE9mKGNvbmRpdGlvbjEpIDwgdGVtcC5pbmRleE9mKGNvbmRpdGlvbjIpKSkgewogICAgICAgIHJ1bnMrKzsKICAgICAgICBpZiAocnVucyA+IDEwKSB7CiAgICAgICAgICByZXR1cm4gInJlbW92ZUJldHdlZW4gZmFpbGVkOiAiICsgc291cmNlOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgdGVtcDIgPSB0ZW1wLnN1YnN0cmluZygwLCB0ZW1wLmluZGV4T2YoY29uZGl0aW9uMSkpOwogICAgICAgIFN0cmluZyB0ZW1wMyA9IHRlbXAuc3Vic3RyaW5nKHRlbXAuaW5kZXhPZihjb25kaXRpb24yKSArIDEsIHRlbXAubGVuZ3RoKCkpOwogICAgICAgIHRlbXAyID0gdGVtcDIudHJpbSgpOwogICAgICAgIGlmICh0ZW1wMyAhPSBudWxsKSB7CiAgICAgICAgICB0ZW1wMyA9IHRlbXAzLnRyaW0oKTsKICAgICAgICAgIHRlbXAyID0gdGVtcDIgKyAnICcgKyB0ZW1wMzsKICAgICAgICB9CiAgICAgICAgdGVtcCA9IHRlbXAyOwogICAgICB9CiAgICAgIHJldHVybiB0ZW1wOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJyZW1vdmVCZXR3ZWVuIiwgIkZhaWxlZDoiICsgZSk7CiAgICB9CiAgICByZXR1cm4gc291cmNlOwogIH0KCiAgLy8gVXNhZ2UgU291cmNlIDogQSB2IEIgLSBBIHYgQkIgOiBhZnRlcmNvbmRpdGlvOiAiIC0gIiByZXN1bHQgOiBBIHYgQgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHJlbW92ZUFmdGVyKFN0cmluZyBzb3VyY2UsIFN0cmluZyBhZnRlckNvbmRpdGlvbikgewogICAgaW50IHRlbXAgPSBzb3VyY2UuaW5kZXhPZihhZnRlckNvbmRpdGlvbik7CiAgICBpZiAodGVtcCA9PSAtMSkgcmV0dXJuIHNvdXJjZTsKICAgIGVsc2UgcmV0dXJuIHNvdXJjZS5zdWJzdHJpbmcoMCwgdGVtcCk7CiAgfQoKICBwdWJsaWMgc3RhdGljIFN0cmluZyByZW1vdmVXb3JkcyhTdHJpbmcgc291cmNlLCBTdHJpbmcgc3BsaXRSdWxlLCBTdHJpbmdbXSB3b3Jkc1RvUmVtb3ZlKSB7CiAgICBWZWN0b3Igd29yZHMgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuc3BsaXRTdHJpbmcoc291cmNlLCBzcGxpdFJ1bGUpOwogICAgU3RyaW5nIHJldFZhbCA9IG5ldyBTdHJpbmcoKTsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgd29yZHMuc2l6ZSgpOyBpKyspIHsKICAgICAgU3RyaW5nIHdvcmQgPSAoU3RyaW5nKSB3b3Jkcy5lbGVtZW50QXQoaSk7CiAgICAgIGJvb2xlYW4gZm91bmQgPSBmYWxzZTsKICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCB3b3Jkc1RvUmVtb3ZlLmxlbmd0aDsgaisrKSB7CiAgICAgICAgaWYgKHdvcmRzVG9SZW1vdmVbal0uZXF1YWxzKHdvcmQpKSBmb3VuZCA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKGZvdW5kID09IGZhbHNlKSByZXRWYWwgPSByZXRWYWwgKyAiICIgKyB3b3JkOwogICAgfQogICAgcmV0VmFsID0gcmV0VmFsLnRyaW0oKTsKICAgIHJldHVybiByZXRWYWw7CiAgfQoKICBwdWJsaWMgc3RhdGljIFN0cmluZyBnZXREYXRlKGludCBhZGREYXlzRnJvbU5vdykgewogICAgRGF0ZSBkID0gbmV3IERhdGUoKTsKICAgIGludCB5ZWFyID0gZ2V0VGhpc1llYXIoKTsKICAgIGludCBtb250aCA9IGQuZ2V0TW9udGgoKSArIDE7CiAgICBpbnQgZGF5ID0gZC5nZXREYXRlKCk7CiAgICBpZiAoZGF5ICsgYWRkRGF5c0Zyb21Ob3cgPj0gMjggJiYgYWRkRGF5c0Zyb21Ob3cgIT0gMCkgewogICAgICBtb250aCsrOwogICAgICBpZiAobW9udGggPiAxMikgewogICAgICAgIG1vbnRoID0gMTsKICAgICAgICB5ZWFyKys7CiAgICAgIH0KICAgICAgZGF5ID0gNTsKICAgIH0gZWxzZSBkYXkgPSBkYXkgKyBhZGREYXlzRnJvbU5vdzsKICAgIHJldHVybiB5ZWFyICsgIi0iICsgbW9udGggKyAiLSIgKyBkYXk7CiAgfQoKICBwdWJsaWMgc3RhdGljIGludCBnZXRUaGlzWWVhcigpIHsKICAgIERhdGUgZCA9IG5ldyBEYXRlKCk7CiAgICBpbnQgeWVhciA9IGQuZ2V0WWVhcigpOwogICAgaWYgKHllYXIgPCAyMDAwKSB5ZWFyICs9IDE5MDA7CiAgICByZXR1cm4geWVhcjsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldFdvcmRXaXRoKFN0cmluZyBzb3VyY2UsIFN0cmluZyB3b3JkTXVzdENvbnRhaW4pIHsKICAgIFZlY3RvciB3b3Jkc0luU291cmNlID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnNwbGl0U3RyaW5nKHNvdXJjZSwgIiAiKTsKICAgIFN0cmluZyByZXRWYWwgPSAiIjsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgd29yZHNJblNvdXJjZS5zaXplKCk7IGkrKykgewogICAgICBTdHJpbmcgYVdvcmQgPSAoU3RyaW5nKSB3b3Jkc0luU291cmNlLmVsZW1lbnRBdChpKTsKICAgICAgaWYgKGFXb3JkLmluZGV4T2Yod29yZE11c3RDb250YWluKSAhPSAtMSkgewogICAgICAgIHJldFZhbCA9IHJldFZhbCArIGFXb3JkICsgIiAiOwogICAgICB9CiAgICB9CiAgICByZXRWYWwgPSByZXRWYWwudHJpbSgpOwogICAgcmV0dXJuIHJldFZhbDsKICB9CgogIC8vIFBhcmFtIHNvdXJjZSA6IDI0Lzkgb3IgMjMtMjQvOQogIC8vIHJldHVybiAyNC4wOS4yMDAwIDAwOjAwIG9yIDIzLjA5LjIwMDAgMDA6MDAKICAvLyBGb3JtYXIgWUUgTU8gREEgSE8gTUkKICBwdWJsaWMgc3RhdGljIFN0cmluZyBtYWtlV29yZFRvRGF0ZShTdHJpbmcgc291cmNlKSB7CiAgICB0cnkgewogICAgICBWZWN0b3Igc3BsaXRSdWxlcyA9IG5ldyBWZWN0b3IoKTsKICAgICAgc3BsaXRSdWxlcy5hZGRFbGVtZW50KG5ldyBTdHJpbmcoIi0iKSk7CiAgICAgIHNwbGl0UnVsZXMuYWRkRWxlbWVudChuZXcgU3RyaW5nKCIvIikpOwogICAgICBWZWN0b3Igd29yZHMgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuc3BsaXRTdHJpbmcoc291cmNlLCBzcGxpdFJ1bGVzKTsKICAgICAgU3RyaW5nIHllYXIgPSBuZXcgSW50ZWdlcihnZXRUaGlzWWVhcigpKS50b1N0cmluZygpOwogICAgICBTdHJpbmcgbW9udGggPSAiMSI7CiAgICAgIFN0cmluZyBkYXkgPSAiMSI7CiAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgd29yZHMuc2l6ZSgpOyBpKyspIHsKICAgICAgICBTdHJpbmcgYVdvcmQgPSAoU3RyaW5nKSB3b3Jkcy5lbGVtZW50QXQoaSk7CiAgICAgICAgaWYgKGkgPT0gd29yZHMuc2l6ZSgpIC0gMSkgbW9udGggPSBhV29yZDsKICAgICAgICBlbHNlIGRheSA9IGFXb3JkOwogICAgICB9CiAgICAgIHJldHVybiB5ZWFyICsgIi0iICsgbW9udGggKyAiLiIgKyBkYXkgKyAiIDAwOjAwIjsKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICB9CiAgICByZXR1cm4gZ2V0RGF0ZSgxKSArICIgMDA6MDAiOwogIH0KCiAgcHVibGljIHN0YXRpYyBWZWN0b3Igc3BsaXRTdHJpbmcoU3RyaW5nIHNvdXJjZSwgU3RyaW5nIHNwbGl0UnVsZSwgaW50IG9uTGFzdFdvcmRzKSB7CiAgICBWZWN0b3IgcmV0VmFsID0gbmV3IFZlY3RvcigpOwogICAgdHJ5IHsKICAgICAgVmVjdG9yIHRlbXAgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuc3BsaXRTdHJpbmcoc291cmNlLCBzcGxpdFJ1bGUpOwogICAgICBTdHJpbmcgb25lID0gIiI7CiAgICAgIFN0cmluZyB0d28gPSAiIjsKICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0ZW1wLnNpemUoKTsgaSsrKSB7CiAgICAgICAgaWYgKGkgPCB0ZW1wLnNpemUoKSAtIG9uTGFzdFdvcmRzKSBvbmUgPSBvbmUgKyAiICIgKyB0ZW1wLmVsZW1lbnRBdChpKTsKICAgICAgICBlbHNlIHR3byA9IHR3byArICIgIiArIHRlbXAuZWxlbWVudEF0KGkpOwogICAgICB9CiAgICAgIHJldFZhbC5hZGQob25lKTsKICAgICAgcmV0VmFsLmFkZCh0d28pOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJzcGxpdFN0cmluZyIsICJGYWlsZWQ6IiArIGUpOwogICAgfQogICAgcmV0dXJuIHJldFZhbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldERhdGVTdHJpbmcoRGF0ZSBkKSB7CiAgICBTdHJpbmcgcmV0VmFsID0gZC50b1N0cmluZygpOwogICAgcmV0VmFsID0gcmV0VmFsLnN1YnN0cmluZygwLCByZXRWYWwubGVuZ3RoKCkgLSAxOCk7CiAgICByZXR1cm4gcmV0VmFsOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgZ2V0RGF0ZVN0cmluZ05pY2VXaXRoWWVhcihEYXRlIGQpIHsKICAgIGlmIChkID09IG51bGwpIHJldHVybiAiICI7CiAgICByZXR1cm4gZC5nZXREYXRlKCkKICAgICAgICArICIvIgogICAgICAgICsgKGQuZ2V0TW9udGgoKSArIDEpCiAgICAgICAgKyAiLSIKICAgICAgICArIChjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0UmVhbFllYXIoZC5nZXRZZWFyKCkpKQogICAgICAgICsgIiAiCiAgICAgICAgKyBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0SG91ck1pbnV0ZU5pY2UoZC5nZXRIb3VycygpKQogICAgICAgICsgIjoiCiAgICAgICAgKyBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0SG91ck1pbnV0ZU5pY2UoZC5nZXRNaW51dGVzKCkpOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgZ2V0RGF0ZVN0cmluZ1hNTChEYXRlIGQpIHsKICAgIGlmIChkID09IG51bGwpIHJldHVybiAiICI7CiAgICByZXR1cm4gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmdldFJlYWxZZWFyKGQuZ2V0WWVhcigpKQogICAgICAgICsgIi0iCiAgICAgICAgKyAoZC5nZXRNb250aCgpICsgMSkKICAgICAgICArICItIgogICAgICAgICsgZC5nZXREYXRlKCkKICAgICAgICArICJUIgogICAgICAgICsgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmdldEhvdXJNaW51dGVOaWNlKGQuZ2V0SG91cnMoKSkKICAgICAgICArICI6IgogICAgICAgICsgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmdldEhvdXJNaW51dGVOaWNlKGQuZ2V0TWludXRlcygpKQogICAgICAgICsgIjowMCI7CiAgfQoKICBwdWJsaWMgc3RhdGljIFN0cmluZyBnZXREYXRlU3RyaW5nWE1MV2l0aERheShEYXRlIGQpIHsKICAgIFN0cmluZyByZXRWYWwgPSAiIjsKICAgIGlmIChkID09IG51bGwpIHJldHVybiAiICI7CiAgICBpZiAoZC5nZXREYXkoKSA9PSAwKSByZXRWYWwgKz0gIlN1biAiOwogICAgZWxzZSBpZiAoZC5nZXREYXkoKSA9PSAxKSByZXRWYWwgKz0gIk1vbiAiOwogICAgZWxzZSBpZiAoZC5nZXREYXkoKSA9PSAyKSByZXRWYWwgKz0gIlR1ZSAiOwogICAgZWxzZSBpZiAoZC5nZXREYXkoKSA9PSAzKSByZXRWYWwgKz0gIldlZCAiOwogICAgZWxzZSBpZiAoZC5nZXREYXkoKSA9PSA0KSByZXRWYWwgKz0gIlRodSAiOwogICAgZWxzZSBpZiAoZC5nZXREYXkoKSA9PSA1KSByZXRWYWwgKz0gIkZyaSAiOwogICAgZWxzZSByZXRWYWwgKz0gIlNhdCAiOwogICAgaW50IG1vbnRoID0gZC5nZXRNb250aCgpICsgMTsKICAgIGlmIChtb250aCA9PSAxKSB7CiAgICAgIHJldFZhbCArPSAiSmFudWFyeSAiOwogICAgfSBlbHNlIGlmIChtb250aCA9PSAyKSB7CiAgICAgIHJldFZhbCArPSAiRmVicnVhcnkgIjsKICAgIH0gZWxzZSBpZiAobW9udGggPT0gMykgewogICAgICByZXRWYWwgKz0gIk1hcmNoICI7CiAgICB9IGVsc2UgaWYgKG1vbnRoID09IDQpIHsKICAgICAgcmV0VmFsICs9ICJBcHJpbCAiOwogICAgfSBlbHNlIGlmIChtb250aCA9PSA1KSB7CiAgICAgIHJldFZhbCArPSAiTWF5ICI7CiAgICB9IGVsc2UgaWYgKG1vbnRoID09IDYpIHsKICAgICAgcmV0VmFsICs9ICJKdW5lICI7CiAgICB9IGVsc2UgaWYgKG1vbnRoID09IDcpIHsKICAgICAgcmV0VmFsICs9ICJKdWx5ICI7CiAgICB9IGVsc2UgaWYgKG1vbnRoID09IDgpIHsKICAgICAgcmV0VmFsICs9ICJBdWd1c3QgIjsKICAgIH0gZWxzZSBpZiAobW9udGggPT0gOSkgewogICAgICByZXRWYWwgKz0gIlNlcHRlbWJlciAiOwogICAgfSBlbHNlIGlmIChtb250aCA9PSAxMCkgewogICAgICByZXRWYWwgKz0gIk9jdG9iZXIgIjsKICAgIH0gZWxzZSBpZiAobW9udGggPT0gMTEpIHsKICAgICAgcmV0VmFsICs9ICJOb3ZlbWJlciAiOwogICAgfSBlbHNlIGlmIChtb250aCA9PSAxMikgewogICAgICByZXRWYWwgKz0gIkRlY2VtYmVyICI7CiAgICB9CiAgICByZXRWYWwgKz0gIiIgKyBkLmdldERhdGUoKSArICIgIjsKICAgIHJldFZhbCArPSBkLmdldEhvdXJzKCkgKyAiOiIgKyBkLmdldE1pbnV0ZXMoKSArICI6IiArIGQuZ2V0U2Vjb25kcygpICsgIiAiOwogICAgcmV0VmFsICs9ICJVVEMgKzAyMDAgIjsKICAgIHJldFZhbCArPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0UmVhbFllYXIoZC5nZXRZZWFyKCkpOwogICAgcmV0dXJuIHJldFZhbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldERhdGVTdHJpbmdOaWNlWWVhck1vbnRoRGF5KERhdGUgZCkgewogICAgaWYgKGQgPT0gbnVsbCkgcmV0dXJuICIgIjsKICAgIHJldHVybiAoY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmdldFJlYWxZZWFyKGQuZ2V0WWVhcigpKSkKICAgICAgICArICItIgogICAgICAgICsgKGQuZ2V0TW9udGgoKSArIDEpCiAgICAgICAgKyAiLSIKICAgICAgICArIGQuZ2V0RGF0ZSgpOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgZ2V0RGF0ZVN0cmluZ05pY2VDb21wbGV0ZVdpdGhTcGFjZShEYXRlIGQpIHsKICAgIGlmIChkID09IG51bGwpIHJldHVybiAiICI7CiAgICByZXR1cm4gZC5nZXREYXRlKCkKICAgICAgICArICIgIgogICAgICAgICsgKGQuZ2V0TW9udGgoKSArIDEpCiAgICAgICAgKyAiICIKICAgICAgICArIChjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0UmVhbFllYXIoZC5nZXRZZWFyKCkpKQogICAgICAgICsgIiAiCiAgICAgICAgKyBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0SG91ck1pbnV0ZU5pY2UoZC5nZXRIb3VycygpKQogICAgICAgICsgIiAiCiAgICAgICAgKyBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0SG91ck1pbnV0ZU5pY2UoZC5nZXRNaW51dGVzKCkpOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgY29udmVydFRvTXlTUUxEYXRlKERhdGUgZCkgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIChjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0UmVhbFllYXIoZC5nZXRZZWFyKCkpKQogICAgICAgICAgKyAiLSIKICAgICAgICAgICsgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmdldEhvdXJNaW51dGVOaWNlKChkLmdldE1vbnRoKCkgKyAxKSkKICAgICAgICAgICsgIi0iCiAgICAgICAgICArIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5nZXRIb3VyTWludXRlTmljZShkLmdldERhdGUoKSkKICAgICAgICAgICsgIiAiCiAgICAgICAgICArIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5nZXRIb3VyTWludXRlTmljZShkLmdldEhvdXJzKCkpCiAgICAgICAgICArICI6IgogICAgICAgICAgKyBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0SG91ck1pbnV0ZU5pY2UoZC5nZXRNaW51dGVzKCkpCiAgICAgICAgICArICI6MDAiOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgIH0KICAgIHJldHVybiBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZ2V0RGF0ZVN0cmluZ05pY2VDb21wbGV0ZShkKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgZG91YmxlIHdvcmR6TWF0Y2goU3RyaW5nIHNvdXJjZSwgU3RyaW5nIHRlc3ROYW1lKSB7CiAgICBpbnQgaGl0cyA9IDA7CiAgICBpbnQgaSA9IDA7CiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aCgpIC0gMjsgaSsrKSB7CiAgICAgIFN0cmluZyBzdWIgPSBzb3VyY2Uuc3Vic3RyaW5nKGksIGkgKyAyKTsKICAgICAgaWYgKHRlc3ROYW1lLnRvVXBwZXJDYXNlKCkuaW5kZXhPZihzdWIpID4gLTEpIGhpdHMrKzsKICAgIH0KICAgIHJldHVybiBoaXRzIC8gKGkgKiAxLjApOwogIH0KCiAgcHVibGljIHN0YXRpYyBOYW1lR3Vlc3NIaXRzIGd1ZXNzTmFtZSgKICAgICAgVmVjdG9yIHRlYW1zVG9HdWVzc0Zyb20sCiAgICAgIFN0cmluZyBwb3NzaWJsZUFsdGVybmF0aXZlTmFtZSwKICAgICAgZG91YmxlIG1pbmltdW1TY29yZSwKICAgICAgZG91YmxlIG1pbmltdW1IaXQsCiAgICAgIGxvbmcgbWF4SGl0cykgewogICAgTmFtZUd1ZXNzSGl0cyBuYW1lR3Vlc3NIaXRzID0gbmV3IE5hbWVHdWVzc0hpdHMobWF4SGl0cyk7CiAgICB0cnkgewogICAgICBpZiAodGVhbXNUb0d1ZXNzRnJvbSAhPSBudWxsICYmIHBvc3NpYmxlQWx0ZXJuYXRpdmVOYW1lICE9IG51bGwpIHsKICAgICAgICAvL1N0cmluZyBwb3NzaWJsZUFsdE5hbWU9cG9zc2libGVBbHRlcm5hdGl2ZU5hbWUuZ2V0VGVhbU5hbWUgKCk7CiAgICAgICAgVGVhbSBwb3NzaWJsZVRlYW0gPSBudWxsOwogICAgICAgIGRvdWJsZSBiZXN0U2NvcmUgPSAwOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGVhbXNUb0d1ZXNzRnJvbS5zaXplKCk7IGkrKykgewogICAgICAgICAgVGVhbSBuYW1lSW5EYXRhQmFzZSA9IChUZWFtKSB0ZWFtc1RvR3Vlc3NGcm9tLmVsZW1lbnRBdChpKTsKICAgICAgICAgIGlmICghbmFtZUluRGF0YUJhc2UuZ2V0VGVhbU5hbWUoKS5lcXVhbHMocG9zc2libGVBbHRlcm5hdGl2ZU5hbWUpKSB7CiAgICAgICAgICAgIGRvdWJsZSBzY29yZSA9IDA7CiAgICAgICAgICAgIGRvdWJsZSB0ZW1wU2NvcmUgPQogICAgICAgICAgICAgICAgVXRpbDQud29yZHpNYXRjaChwb3NzaWJsZUFsdGVybmF0aXZlTmFtZSwgbmFtZUluRGF0YUJhc2UuZ2V0VGVhbU5hbWUoKSk7CiAgICAgICAgICAgIGlmICh0ZW1wU2NvcmUgPiBtaW5pbXVtSGl0KSBzY29yZSArPSB0ZW1wU2NvcmU7CiAgICAgICAgICAgIFZlY3RvciBhbHROYW1lcyA9IG5hbWVJbkRhdGFCYXNlLmdldEFsdGVybmF0aXZlVGVhbU5hbWVzKCk7CiAgICAgICAgICAgIGlmIChhbHROYW1lcyAhPSBudWxsICYmIGFsdE5hbWVzLnNpemUoKSA+IDApIHsKICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGFsdE5hbWVzLnNpemUoKTsgaisrKSB7CiAgICAgICAgICAgICAgICBBbHROYW1lIGFuID0gKEFsdE5hbWUpIGFsdE5hbWVzLmVsZW1lbnRBdChqKTsKICAgICAgICAgICAgICAgIHRlbXBTY29yZSA9IFV0aWw0LndvcmR6TWF0Y2gocG9zc2libGVBbHRlcm5hdGl2ZU5hbWUsIGFuLmdldEFsdE5hbWUoKSk7CiAgICAgICAgICAgICAgICBpZiAodGVtcFNjb3JlID4gbWluaW11bUhpdCkgc2NvcmUgKz0gdGVtcFNjb3JlOwogICAgICAgICAgICAgIH0gLy8gZm9yIGFsdG5hbWUKICAgICAgICAgICAgfSAvLyBpZiBhbHRuYW1lCiAgICAgICAgICAgIGlmIChzY29yZSA+IG1pbmltdW1TY29yZSkgbmFtZUd1ZXNzSGl0cy5hZGRIaXQobmFtZUluRGF0YUJhc2UsIHNjb3JlKTsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGZvciBpCiAgICAgIH0gLy8gaWYgIT1udWxsCiAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZGVidWcoImd1ZXNzTmFtZSIsICJGYWlsZWQgZm9yIHRlYW06IiArIHBvc3NpYmxlQWx0ZXJuYXRpdmVOYW1lKTsKICAgIH0KICAgIHJldHVybiBuYW1lR3Vlc3NIaXRzOwogIH0KCiAgcHVibGljIHN0YXRpYyBUZWFtIGd1ZXNzTmFtZSgKICAgICAgVmVjdG9yIHRlYW1zVG9HdWVzc0Zyb20sCiAgICAgIFRlYW0gcG9zc2libGVBbHRlcm5hdGl2ZU5hbWUsCiAgICAgIGRvdWJsZSBtaW5pbXVtU2NvcmUsCiAgICAgIGRvdWJsZSBtaW5pbXVtSGl0KSB7CiAgICB0cnkgewogICAgICBpZiAodGVhbXNUb0d1ZXNzRnJvbSAhPSBudWxsICYmIHBvc3NpYmxlQWx0ZXJuYXRpdmVOYW1lICE9IG51bGwpIHsKICAgICAgICBTdHJpbmcgcG9zc2libGVBbHROYW1lID0gcG9zc2libGVBbHRlcm5hdGl2ZU5hbWUuZ2V0VGVhbU5hbWUoKTsKICAgICAgICBUZWFtIHBvc3NpYmxlVGVhbSA9IG51bGw7CiAgICAgICAgZG91YmxlIGJlc3RTY29yZSA9IDA7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0ZWFtc1RvR3Vlc3NGcm9tLnNpemUoKTsgaSsrKSB7CiAgICAgICAgICBUZWFtIG5hbWVJbkRhdGFCYXNlID0gKFRlYW0pIHRlYW1zVG9HdWVzc0Zyb20uZWxlbWVudEF0KGkpOwogICAgICAgICAgaWYgKCFuYW1lSW5EYXRhQmFzZS5nZXRUZWFtTmFtZSgpLmVxdWFscyhwb3NzaWJsZUFsdE5hbWUpKSB7CiAgICAgICAgICAgIGRvdWJsZSBzY29yZSA9IDA7CiAgICAgICAgICAgIGRvdWJsZSB0ZW1wU2NvcmUgPSBVdGlsNC53b3Jkek1hdGNoKHBvc3NpYmxlQWx0TmFtZSwgbmFtZUluRGF0YUJhc2UuZ2V0VGVhbU5hbWUoKSk7CiAgICAgICAgICAgIGlmICh0ZW1wU2NvcmUgPiBtaW5pbXVtSGl0KSBzY29yZSArPSB0ZW1wU2NvcmU7CiAgICAgICAgICAgIFZlY3RvciBhbHROYW1lcyA9IG5hbWVJbkRhdGFCYXNlLmdldEFsdGVybmF0aXZlVGVhbU5hbWVzKCk7CiAgICAgICAgICAgIGlmIChhbHROYW1lcyAhPSBudWxsICYmIGFsdE5hbWVzLnNpemUoKSA+IDApIHsKICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGFsdE5hbWVzLnNpemUoKTsgaisrKSB7CiAgICAgICAgICAgICAgICBBbHROYW1lIGFuID0gKEFsdE5hbWUpIGFsdE5hbWVzLmVsZW1lbnRBdChqKTsKICAgICAgICAgICAgICAgIHRlbXBTY29yZSA9IFV0aWw0LndvcmR6TWF0Y2gocG9zc2libGVBbHROYW1lLCBhbi5nZXRBbHROYW1lKCkpOwogICAgICAgICAgICAgICAgaWYgKHRlbXBTY29yZSA+IG1pbmltdW1IaXQpIHNjb3JlICs9IHRlbXBTY29yZTsKICAgICAgICAgICAgICB9IC8vIGZvciBhbHRuYW1lCiAgICAgICAgICAgIH0gLy8gaWYgYWx0bmFtZQogICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0U2NvcmUpIHsKICAgICAgICAgICAgICBiZXN0U2NvcmUgPSBzY29yZTsKICAgICAgICAgICAgICBwb3NzaWJsZVRlYW0gPSBuYW1lSW5EYXRhQmFzZTsKICAgICAgICAgICAgfSAvLyBpZiBiZXN0CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBmb3IgaQogICAgICAgIGlmIChiZXN0U2NvcmUgPiBtaW5pbXVtU2NvcmUpIHsKICAgICAgICAgIHJldHVybiBwb3NzaWJsZVRlYW07CiAgICAgICAgfQogICAgICB9IC8vIGlmICE9bnVsbAogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJndWVzc05hbWUiLCAiRmFpbGVkIGZvciB0ZWFtOiIgKyBwb3NzaWJsZUFsdGVybmF0aXZlTmFtZSk7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgdm9pZCBDb3B5RmlsZShGaWxlIGluLCBGaWxlIG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICB0cnkgewogICAgICAvL1N5c3RlbS5vdXQucHJpbnRsbigiQ29weUZpbGU6Iitpbi5nZXRDYW5vbmljYWxQYXRoICgpKyIgLT4gIitvdXQuZ2V0Q2Fub25pY2FsUGF0aCAoKSk7CiAgICAgIEZpbGVJbnB1dFN0cmVhbSBmaXMgPSBuZXcgRmlsZUlucHV0U3RyZWFtKGluKTsKICAgICAgRmlsZU91dHB1dFN0cmVhbSBmb3MgPSBuZXcgRmlsZU91dHB1dFN0cmVhbShvdXQpOwogICAgICBieXRlW10gYnVmID0gbmV3IGJ5dGVbMTAyNF07CiAgICAgIGludCBpID0gMDsKICAgICAgd2hpbGUgKChpID0gZmlzLnJlYWQoYnVmKSkgIT0gLTEpIHsKICAgICAgICBmb3Mud3JpdGUoYnVmLCAwLCBpKTsKICAgICAgfQogICAgICBmaXMuY2xvc2UoKTsKICAgICAgZm9zLmNsb3NlKCk7CiAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAvL1N5c3RlbS5vdXQucHJpbnRsbigiY29weUZpbGU6RmFpbGVkOiIrZSk7CiAgICB9CiAgfQoKICBwdWJsaWMgc3RhdGljIHZvaWQgQ29weUZpbGUoU3RyaW5nIGNhdGFsb2csIFN0cmluZyBkZXN0aW5hdGlvbiwgU3RyaW5nIGZpbGVOYW1lKQogICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgIFV0aWw0LkNvcHlGaWxlKG5ldyBGaWxlKGNhdGFsb2cgKyBmaWxlTmFtZSksIG5ldyBGaWxlKGRlc3RpbmF0aW9uICsgZmlsZU5hbWUpKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgdm9pZCBDb3B5Qm9va21ha2VySFRNTFBhZ2VzKAogICAgICBTdHJpbmcgc291cmNlQ2F0YWxvZywgU3RyaW5nIGJvb2ttYWtlck5hbWUsIFN0cmluZyBkZXN0aW5hdGlvbkNhdGFsb2cpIHsKICAgIHRyeSB7CiAgICAgIFV0aWw0LkNvcHlGaWxlKHNvdXJjZUNhdGFsb2cgKyBib29rbWFrZXJOYW1lICsgIlxcIiwgZGVzdGluYXRpb25DYXRhbG9nLCAiQ29tcGFyZS5odG1sIik7CiAgICAgIFV0aWw0LkNvcHlGaWxlKHNvdXJjZUNhdGFsb2cgKyBib29rbWFrZXJOYW1lICsgIlxcIiwgZGVzdGluYXRpb25DYXRhbG9nLCAiVmlld0FsbE9kZHMuaHRtbCIpOwogICAgICBmb3IgKGludCBpID0gMDsgaSA8IDE2MDsgaSsrKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IG5ldyBJbnRlZ2VyKGkpLnRvU3RyaW5nKCkgKyAiLmh0bWwiOwogICAgICAgICAgVXRpbDQuQ29weUZpbGUoc291cmNlQ2F0YWxvZyArIGJvb2ttYWtlck5hbWUgKyAiXFwiLCBkZXN0aW5hdGlvbkNhdGFsb2csIGZpbGVOYW1lKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZWUpIHsKICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgIGNvbS5iZXRyYWRhci5jb21tb24uVXRpbC5kZWJ1ZygiQ29weUJvb2ttYWtlckhUTUxQYWdlcyIsICJGYWlsZWQ6IiArIGUpOwogICAgfQogIH0KCiAgcHVibGljIHN0YXRpYyBib29sZWFuIGlzRGF0ZUJlZm9yZVRvZGF5KERhdGUgY29tcGFyZURhdGUpIHsKICAgIERhdGUgbm93ID0gZ2V0RGF0ZVRvZGF5VGltZSgpOwogICAgbG9uZyBjb21wYXJlVGltZSA9IGNvbXBhcmVEYXRlLmdldFRpbWUoKTsKICAgIGxvbmcgbm93VGltZSA9IG5vdy5nZXRUaW1lKCk7CiAgICBpZiAobm93VGltZSAtIGNvbXBhcmVUaW1lID4gMTAwMCkgcmV0dXJuIHRydWU7CiAgICBlbHNlIHJldHVybiBmYWxzZTsKICB9CgogIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBpc0RhdGVEaWZmZXJlbmNlTW9yZVRoYW4oRGF0ZSBzb3VyY2UsIERhdGUgY29tcGFyZSwgaW50IG1pbnV0ZXMpIHsKCiAgICBsb25nIHNvdXJjZVRpbWUgPSBzb3VyY2UuZ2V0VGltZSgpOwoKICAgIGxvbmcgY29tcGFyZVRpbWUgPSBjb21wYXJlLmdldFRpbWUoKTsKCiAgICBsb25nIGRpZmYgPSBzb3VyY2VUaW1lIC0gY29tcGFyZVRpbWU7CgogICAgaWYgKGRpZmYgPCAwKSBkaWZmID0gZGlmZiAqIC0xOwoKICAgIGlmIChkaWZmIC8gKDEwMDAgKiA2MCkgPiBtaW51dGVzKSByZXR1cm4gdHJ1ZTsKCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBwdWJsaWMgc3RhdGljIERhdGUgZ2V0RGF0ZVRvZGF5VGltZSgpIHsKICAgIERhdGUgbm93ID0gbmV3IERhdGUoKTsKICAgIG5vdy5zZXRIb3VycygwKTsKICAgIG5vdy5zZXRNaW51dGVzKDApOwogICAgbm93LnNldFNlY29uZHMoMCk7CiAgICByZXR1cm4gbm93OwogIH0KCiAgLyoKICBwdWJsaWMgc3RhdGljIHZvaWQgc2VuZE1haWwyKFN0cmluZyBtYWlsQWRyZXNzLFN0cmluZyBzdWJqZWN0LCBTdHJpbmcgYm9keSxTdHJpbmcgaG9zdCxTdHJpbmcgZnJvbUFkcmVzcyxTdHJpbmcgcGFzc3dvcmQpewogICAgdHJ5ewogICAgICBqYXZhLnV0aWwuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gU3lzdGVtLmdldFByb3BlcnRpZXMoKTsKICAgICAgcHJvcGVydGllcy5wdXQoIm1haWwuc210cC5ob3N0Iixob3N0KTsKICAgICAgcHJvcGVydGllcy5wdXQoIm1haWwuc210cC5hdXRoIiwidHJ1ZSIpOwogICAgICBBdXRoZW50aWNhdG9yIGF1dGggPSBuZXcgQXV0aGVudGljYXRvciggImVybGVuZHBlQG9ubGluZS5ubyIsICI4ODNjaGVpIik7CiAgICAgIFNlc3Npb24gc2Vzc2lvbiA9IFNlc3Npb24uZ2V0SW5zdGFuY2UocHJvcGVydGllcywgYXV0aCk7CiAgICAgIC8vc2Vzc2lvbi5zZXRQYXNzd29yZEF1dGhlbnRpY2F0aW9uIChuZXcgamF2YXgubWFpbC5VUkxOYW1lKCJlcmxlbmRwZUBvbmxpbmUubm8iKSxuZXcgamF2YXgubWFpbC5QYXNzd29yZEF1dGhlbnRpY2F0aW9uKCJlcmxlbmRwZUBvbmxpbmUubm8iLCI4ODNjaGVpIikpOwogICAgICAvLyBDb25zdHJ1Y3QgdGhlIG1lc3NhZ2UKICAgICAgTWltZU1lc3NhZ2UgbWVzc2FnZSA9IG5ldyBNaW1lTWVzc2FnZShzZXNzaW9uKTsKICAgICAgLy8gU2V0IHRoZSBmcm9tIGFkZHJlc3MKICAgICAgQWRkcmVzcyBmcm9tQWRkcmVzcyA9IG5ldyBJbnRlcm5ldEFkZHJlc3MoZnJvbUFkcmVzcyk7CiAgICAgIG1lc3NhZ2Uuc2V0RnJvbShmcm9tQWRkcmVzcyk7CiAgICAgIC8vIFBhcnNlIGFuZCBzZXQgdGhlIHJlY2lwaWVudCBhZGRyZXNzZXMKICAgICAgQWRkcmVzc1tdIHRvQWRkcmVzc2VzID0gSW50ZXJuZXRBZGRyZXNzLnBhcnNlKG1haWxBZHJlc3MpOwogICAgICBtZXNzYWdlLnNldFJlY2lwaWVudHMoTWVzc2FnZS5SZWNpcGllbnRUeXBlLlRPLHRvQWRkcmVzc2VzKTsKICAgICAgbWVzc2FnZS5zZXRTdWJqZWN0KHN1YmplY3QpOwogICAgICBtZXNzYWdlLnNldFRleHQoYm9keSk7CiAgICAgIG1lc3NhZ2Uuc2V0U2VudERhdGUgKG5ldyBqYXZhLnV0aWwuRGF0ZSgpKTsKICAgICAgLyoKICAgICAgVHJhbnNwb3J0IHRyYW5zcG9ydD1zZXNzaW9uLmdldFRyYW5zcG9ydCAoInNtdHAiKTsKICAgICAgdHJhbnNwb3J0LmNvbm5lY3QgKGhvc3QsImVybGVuZHBlIiwiODgzY2hlaSIpOwogICAgICB0cmFuc3BvcnQuc2VuZE1lc3NhZ2UgKG1lc3NhZ2UsbWVzc2FnZS5nZXRBbGxSZWNpcGllbnRzICgpKTsKICAgICAgdHJhbnNwb3J0LmNsb3NlICgpOwogICAgICBUcmFuc3BvcnQuc2VuZChtZXNzYWdlKTsKICAgIH0KICAgIGNhdGNoKEV4Y2VwdGlvbiBlKXsKICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJGYWlsZWQgZm9yIG1haWxBZHJlc3M6ICIrbWFpbEFkcmVzcysgIiBlcnJvcjogIitlKTsKICAgIH0KICB9CiAgKi8KCiAgcHVibGljIHN0YXRpYyB2b2lkIHNlbmRNYWlsKAogICAgICBTdHJpbmcgbWFpbEFkcmVzcywKICAgICAgU3RyaW5nIHN1YmplY3QsCiAgICAgIFN0cmluZyBib2R5LAogICAgICBTdHJpbmcgaG9zdCwKICAgICAgU3RyaW5nIGZyb21BZHJlc3MsCiAgICAgIGJvb2xlYW4gaHRtbCkgewogICAgdHJ5IHsKICAgICAgamF2YS51dGlsLlByb3BlcnRpZXMgcHJvcGVydGllcyA9IFN5c3RlbS5nZXRQcm9wZXJ0aWVzKCk7CiAgICAgIHByb3BlcnRpZXMucHV0KCJtYWlsLnNtdHAuaG9zdCIsIGhvc3QpOwogICAgICBTZXNzaW9uIHNlc3Npb24gPSBTZXNzaW9uLmdldEluc3RhbmNlKHByb3BlcnRpZXMsIG51bGwpOwogICAgICAvL3Nlc3Npb24uc2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbiAoKTsKICAgICAgLy8gQ29uc3RydWN0IHRoZSBtZXNzYWdlCiAgICAgIE1pbWVNZXNzYWdlIG1lc3NhZ2UgPSBuZXcgTWltZU1lc3NhZ2Uoc2Vzc2lvbik7CiAgICAgIC8vIFNldCB0aGUgZnJvbSBhZGRyZXNzCiAgICAgIEFkZHJlc3MgZnJvbUFkZHJlc3MgPSBuZXcgSW50ZXJuZXRBZGRyZXNzKGZyb21BZHJlc3MpOwogICAgICBtZXNzYWdlLnNldEZyb20oZnJvbUFkZHJlc3MpOwogICAgICAvLyBQYXJzZSBhbmQgc2V0IHRoZSByZWNpcGllbnQgYWRkcmVzc2VzCiAgICAgIEFkZHJlc3NbXSB0b0FkZHJlc3NlcyA9IEludGVybmV0QWRkcmVzcy5wYXJzZShtYWlsQWRyZXNzKTsKICAgICAgbWVzc2FnZS5zZXRSZWNpcGllbnRzKE1lc3NhZ2UuUmVjaXBpZW50VHlwZS5UTywgdG9BZGRyZXNzZXMpOwogICAgICBtZXNzYWdlLnNldFN1YmplY3QoTWFpbFV0aWwuZ2V0WnVyaWNoU3ViamVjdCh0b0FkZHJlc3NlcywgbnVsbCwgc3ViamVjdCkpOwogICAgICBpZiAoaHRtbCkgewogICAgICAgIG1lc3NhZ2Uuc2V0Q29udGVudChib2R5LCAidGV4dC9odG1sIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVzc2FnZS5zZXRUZXh0KGJvZHkpOwogICAgICB9CiAgICAgIG1lc3NhZ2Uuc2V0U2VudERhdGUobmV3IERhdGUoKSk7CiAgICAgIFRyYW5zcG9ydC5zZW5kKG1lc3NhZ2UpOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKAogICAgICAgICAgInNlbmRNYWlsIiwgIkZhaWxlZCBmb3IgbWFpbEFkcmVzczogIiArIG1haWxBZHJlc3MgKyAiIGVycm9yOiAiICsgZSk7CiAgICB9CiAgfQoKICBwdWJsaWMgc3RhdGljIHZvaWQgc2VuZE1haWwoCiAgICAgIFN0cmluZyBtYWlsQWRyZXNzLAogICAgICBTdHJpbmcgc3ViamVjdCwKICAgICAgU3RyaW5nIGJvZHksCiAgICAgIFN0cmluZyBob3N0LAogICAgICBTdHJpbmcgZnJvbUFkcmVzcywKICAgICAgU3RyaW5nIGNjQWRyZXNzLAogICAgICBTdHJpbmdbXSBkaXNwbGF5RmlsZU5hbWVzLAogICAgICBTdHJpbmdbXSBwaHlzaWNhbEZpbGVOYW1lcywKICAgICAgYm9vbGVhbiBoaWdoUHJpb3JpdHkpIHsKICAgIHRyeSB7CiAgICAgIGphdmEudXRpbC5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBTeXN0ZW0uZ2V0UHJvcGVydGllcygpOwogICAgICBwcm9wZXJ0aWVzLnB1dCgibWFpbC5zbXRwLmhvc3QiLCBob3N0KTsKICAgICAgU2Vzc2lvbiBzZXNzaW9uID0gU2Vzc2lvbi5nZXRJbnN0YW5jZShwcm9wZXJ0aWVzLCBudWxsKTsKICAgICAgTWltZU1lc3NhZ2UgbWVzc2FnZSA9IG5ldyBNaW1lTWVzc2FnZShzZXNzaW9uKTsKICAgICAgQWRkcmVzcyBmcm9tQWRkcmVzcyA9IG5ldyBJbnRlcm5ldEFkZHJlc3MoZnJvbUFkcmVzcyk7CiAgICAgIG1lc3NhZ2Uuc2V0RnJvbShmcm9tQWRkcmVzcyk7CiAgICAgIEFkZHJlc3NbXSB0b0FkZHJlc3NlcyA9IEludGVybmV0QWRkcmVzcy5wYXJzZShtYWlsQWRyZXNzKTsKICAgICAgQWRkcmVzc1tdIGNjQWRkcmVzc2VzID0gSW50ZXJuZXRBZGRyZXNzLnBhcnNlKGNjQWRyZXNzKTsKICAgICAgaWYgKHRvQWRkcmVzc2VzICE9IG51bGwpIG1lc3NhZ2Uuc2V0UmVjaXBpZW50cyhNZXNzYWdlLlJlY2lwaWVudFR5cGUuVE8sIHRvQWRkcmVzc2VzKTsKICAgICAgaWYgKGNjQWRkcmVzc2VzICE9IG51bGwpIG1lc3NhZ2Uuc2V0UmVjaXBpZW50cyhNZXNzYWdlLlJlY2lwaWVudFR5cGUuQ0MsIGNjQWRkcmVzc2VzKTsKICAgICAgbWVzc2FnZS5zZXRTdWJqZWN0KE1haWxVdGlsLmdldFp1cmljaFN1YmplY3QodG9BZGRyZXNzZXMsIGNjQWRkcmVzc2VzLCBzdWJqZWN0KSk7CiAgICAgIGlmIChoaWdoUHJpb3JpdHkgPT0gdHJ1ZSkgewogICAgICAgIG1lc3NhZ2UuYWRkSGVhZGVyKCJYLU1TTWFpbC1Qcmlvcml0eSIsICJIaWdoIik7CiAgICAgIH0KICAgICAgLy8gQ3JlYXRlIHRoZSBtZXNzYWdlIHBhcnQKICAgICAgQm9keVBhcnQgbWVzc2FnZUJvZHlQYXJ0ID0gbmV3IE1pbWVCb2R5UGFydCgpOwoKICAgICAgLy8gRmlsbCB0aGUgbWVzc2FnZQogICAgICBtZXNzYWdlQm9keVBhcnQuc2V0VGV4dChib2R5KTsKCiAgICAgIE11bHRpcGFydCBtdWx0aXBhcnQgPSBuZXcgTWltZU11bHRpcGFydCgpOwogICAgICBtdWx0aXBhcnQuYWRkQm9keVBhcnQobWVzc2FnZUJvZHlQYXJ0KTsKCiAgICAgIC8vIFBhcnQgdHdvIGlzIGF0dGFjaG1lbnQKICAgICAgaWYgKHBoeXNpY2FsRmlsZU5hbWVzICE9IG51bGwpIHsKICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IHBoeXNpY2FsRmlsZU5hbWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBtZXNzYWdlQm9keVBhcnQgPSBuZXcgTWltZUJvZHlQYXJ0KCk7CiAgICAgICAgICBEYXRhU291cmNlIHNvdXJjZSA9IG5ldyBGaWxlRGF0YVNvdXJjZShwaHlzaWNhbEZpbGVOYW1lc1tqXSk7CiAgICAgICAgICBtZXNzYWdlQm9keVBhcnQuc2V0RGF0YUhhbmRsZXIobmV3IERhdGFIYW5kbGVyKHNvdXJjZSkpOwogICAgICAgICAgaWYgKGRpc3BsYXlGaWxlTmFtZXMgIT0gbnVsbCAmJiBkaXNwbGF5RmlsZU5hbWVzLmxlbmd0aCA+PSBqKSB7CiAgICAgICAgICAgIG1lc3NhZ2VCb2R5UGFydC5zZXRGaWxlTmFtZShkaXNwbGF5RmlsZU5hbWVzW2pdKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1lc3NhZ2VCb2R5UGFydC5zZXRGaWxlTmFtZShwaHlzaWNhbEZpbGVOYW1lc1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgICBtdWx0aXBhcnQuYWRkQm9keVBhcnQobWVzc2FnZUJvZHlQYXJ0KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbWVzc2FnZS5zZXRDb250ZW50KG11bHRpcGFydCk7CiAgICAgIG1lc3NhZ2Uuc2V0U2VudERhdGUobmV3IERhdGUoKSk7CiAgICAgIFRyYW5zcG9ydC5zZW5kKG1lc3NhZ2UpOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJzZW5kTWFpbDpGYWlsZWQgZm9yIG1haWxBZHJlc3M6ICIgKyBtYWlsQWRyZXNzICsgIiBlcnJvcjogIiArIGUpOwogICAgfQogIH0KCiAgcHVibGljIHN0YXRpYyB2b2lkIHNlbmRNYWlsKAogICAgICBTdHJpbmcgbWFpbEFkcmVzcywKICAgICAgU3RyaW5nIHN1YmplY3QsCiAgICAgIFN0cmluZyBib2R5LAogICAgICBTdHJpbmcgaG9zdCwKICAgICAgU3RyaW5nIGZyb21BZHJlc3MsCiAgICAgIFN0cmluZyBjY0FkcmVzcywKICAgICAgYm9vbGVhbiBzZW5kQXNIVE1MLAogICAgICBib29sZWFuIGhpZ2hQcmlvcml0eSkgewogICAgdHJ5IHsKICAgICAgamF2YS51dGlsLlByb3BlcnRpZXMgcHJvcGVydGllcyA9IFN5c3RlbS5nZXRQcm9wZXJ0aWVzKCk7CiAgICAgIHByb3BlcnRpZXMucHV0KCJtYWlsLnNtdHAuaG9zdCIsIGhvc3QpOwogICAgICBTZXNzaW9uIHNlc3Npb24gPSBTZXNzaW9uLmdldEluc3RhbmNlKHByb3BlcnRpZXMsIG51bGwpOwogICAgICAvL3Nlc3Npb24uc2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbiAoKTsKICAgICAgLy8gQ29uc3RydWN0IHRoZSBtZXNzYWdlCiAgICAgIE1pbWVNZXNzYWdlIG1lc3NhZ2UgPSBuZXcgTWltZU1lc3NhZ2Uoc2Vzc2lvbik7CiAgICAgIC8vIFNldCB0aGUgZnJvbSBhZGRyZXNzCiAgICAgIEFkZHJlc3MgZnJvbUFkZHJlc3MgPSBuZXcgSW50ZXJuZXRBZGRyZXNzKGZyb21BZHJlc3MpOwogICAgICBtZXNzYWdlLnNldEZyb20oZnJvbUFkZHJlc3MpOwogICAgICAvLyBQYXJzZSBhbmQgc2V0IHRoZSByZWNpcGllbnQgYWRkcmVzc2VzCiAgICAgIEFkZHJlc3NbXSB0b0FkZHJlc3NlcyA9IEludGVybmV0QWRkcmVzcy5wYXJzZShtYWlsQWRyZXNzKTsKICAgICAgQWRkcmVzc1tdIGNjQWRkcmVzc2VzID0gSW50ZXJuZXRBZGRyZXNzLnBhcnNlKGNjQWRyZXNzKTsKICAgICAgbWVzc2FnZS5zZXRSZWNpcGllbnRzKE1lc3NhZ2UuUmVjaXBpZW50VHlwZS5UTywgdG9BZGRyZXNzZXMpOwogICAgICBtZXNzYWdlLnNldFJlY2lwaWVudHMoTWVzc2FnZS5SZWNpcGllbnRUeXBlLkNDLCBjY0FkZHJlc3Nlcyk7CiAgICAgIG1lc3NhZ2Uuc2V0U3ViamVjdChNYWlsVXRpbC5nZXRadXJpY2hTdWJqZWN0KHRvQWRkcmVzc2VzLCBjY0FkZHJlc3Nlcywgc3ViamVjdCkpOwogICAgICBpZiAoaGlnaFByaW9yaXR5ID09IHRydWUpIHsKICAgICAgICBtZXNzYWdlLmFkZEhlYWRlcigiWC1NU01haWwtUHJpb3JpdHkiLCAiSGlnaCIpOwogICAgICB9CiAgICAgIGlmIChzZW5kQXNIVE1MKSB7CiAgICAgICAgbWVzc2FnZS5zZXRDb250ZW50KGJvZHksICJ0ZXh0L2h0bWwiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtZXNzYWdlLnNldFRleHQoYm9keSk7CiAgICAgIH0KICAgICAgbWVzc2FnZS5zZXRTZW50RGF0ZShuZXcgRGF0ZSgpKTsKICAgICAgVHJhbnNwb3J0LnNlbmQobWVzc2FnZSk7CiAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZGVidWcoCiAgICAgICAgICAic2VuZE1haWwiLCAiRmFpbGVkIGZvciBtYWlsQWRyZXNzOiAiICsgbWFpbEFkcmVzcyArICIgZXJyb3I6ICIgKyBlKTsKICAgIH0KICB9CgogIHB1YmxpYyBzdGF0aWMgdm9pZCBzZW5kTWFpbCgKICAgICAgU3RyaW5nIG1haWxBZHJlc3MsCiAgICAgIFN0cmluZyBzdWJqZWN0LAogICAgICBTdHJpbmcgYm9keSwKICAgICAgU3RyaW5nIGhvc3QsCiAgICAgIFN0cmluZyBmcm9tQWRyZXNzLAogICAgICBTdHJpbmcgY2NBZHJlc3MsCiAgICAgIGJvb2xlYW4gc2VuZEFzSFRNTCkgewogICAgdHJ5IHsKICAgICAgamF2YS51dGlsLlByb3BlcnRpZXMgcHJvcGVydGllcyA9IFN5c3RlbS5nZXRQcm9wZXJ0aWVzKCk7CiAgICAgIHByb3BlcnRpZXMucHV0KCJtYWlsLnNtdHAuaG9zdCIsIGhvc3QpOwogICAgICBTZXNzaW9uIHNlc3Npb24gPSBTZXNzaW9uLmdldEluc3RhbmNlKHByb3BlcnRpZXMsIG51bGwpOwogICAgICAvL3Nlc3Npb24uc2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbiAoKTsKICAgICAgLy8gQ29uc3RydWN0IHRoZSBtZXNzYWdlCiAgICAgIE1pbWVNZXNzYWdlIG1lc3NhZ2UgPSBuZXcgTWltZU1lc3NhZ2Uoc2Vzc2lvbik7CiAgICAgIC8vIFNldCB0aGUgZnJvbSBhZGRyZXNzCiAgICAgIEFkZHJlc3MgZnJvbUFkZHJlc3MgPSBuZXcgSW50ZXJuZXRBZGRyZXNzKGZyb21BZHJlc3MpOwogICAgICBtZXNzYWdlLnNldEZyb20oZnJvbUFkZHJlc3MpOwogICAgICAvLyBQYXJzZSBhbmQgc2V0IHRoZSByZWNpcGllbnQgYWRkcmVzc2VzCiAgICAgIEFkZHJlc3NbXSB0b0FkZHJlc3NlcyA9IEludGVybmV0QWRkcmVzcy5wYXJzZShtYWlsQWRyZXNzKTsKICAgICAgQWRkcmVzc1tdIGNjQWRkcmVzc2VzID0gSW50ZXJuZXRBZGRyZXNzLnBhcnNlKGNjQWRyZXNzKTsKICAgICAgbWVzc2FnZS5zZXRSZWNpcGllbnRzKE1lc3NhZ2UuUmVjaXBpZW50VHlwZS5UTywgdG9BZGRyZXNzZXMpOwogICAgICBtZXNzYWdlLnNldFJlY2lwaWVudHMoTWVzc2FnZS5SZWNpcGllbnRUeXBlLkNDLCBjY0FkZHJlc3Nlcyk7CiAgICAgIG1lc3NhZ2Uuc2V0U3ViamVjdChNYWlsVXRpbC5nZXRadXJpY2hTdWJqZWN0KHRvQWRkcmVzc2VzLCBjY0FkZHJlc3Nlcywgc3ViamVjdCkpOwogICAgICBpZiAoc2VuZEFzSFRNTCkgewogICAgICAgIG1lc3NhZ2Uuc2V0Q29udGVudChib2R5LCAidGV4dC9odG1sIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVzc2FnZS5zZXRUZXh0KGJvZHkpOwogICAgICB9CiAgICAgIG1lc3NhZ2Uuc2V0U2VudERhdGUobmV3IERhdGUoKSk7CiAgICAgIFRyYW5zcG9ydC5zZW5kKG1lc3NhZ2UpOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKAogICAgICAgICAgInNlbmRNYWlsIiwgIkZhaWxlZCBmb3IgbWFpbEFkcmVzczogIiArIG1haWxBZHJlc3MgKyAiIGVycm9yOiAiICsgZSk7CiAgICB9CiAgfQoKICBwdWJsaWMgc3RhdGljIERhdGUgZ2V0RGF0ZShTdHJpbmcgZGF5T2ZXZWVrLCBpbnQgaG91cnMsIGludCBtaW51dGVzKSB7CiAgICBTdHJpbmdbXSBkYXlzID0geyJTQVRVUkRBWSIsICJTVU5EQVkiLCAiTU9OREFZIiwgIlRVRVNEQVkiLCAiV0VETkVTREFZIiwgIlRIVVJTREFZIiwgIkZSSURBWSJ9OwogICAgaW50W10gdGhlRGF5c09mV2VlayA9IG5ldyBpbnRbN107CiAgICB0aGVEYXlzT2ZXZWVrWzBdID0gR3JlZ29yaWFuQ2FsZW5kYXIuU0FUVVJEQVk7CiAgICB0aGVEYXlzT2ZXZWVrWzFdID0gR3JlZ29yaWFuQ2FsZW5kYXIuU1VOREFZOwogICAgdGhlRGF5c09mV2Vla1syXSA9IEdyZWdvcmlhbkNhbGVuZGFyLk1PTkRBWTsKICAgIHRoZURheXNPZldlZWtbM10gPSBHcmVnb3JpYW5DYWxlbmRhci5UVUVTREFZOwogICAgdGhlRGF5c09mV2Vla1s0XSA9IEdyZWdvcmlhbkNhbGVuZGFyLldFRE5FU0RBWTsKICAgIHRoZURheXNPZldlZWtbNV0gPSBHcmVnb3JpYW5DYWxlbmRhci5USFVSU0RBWTsKICAgIHRoZURheXNPZldlZWtbNl0gPSBHcmVnb3JpYW5DYWxlbmRhci5GUklEQVk7CiAgICBkYXlPZldlZWsgPSBkYXlPZldlZWsudG9VcHBlckNhc2UoKTsKICAgIGludCBkYXlOdW1iZXIgPSAtMTsKICAgIGZvciAoaW50IGogPSAwOyBqIDwgZGF5cy5sZW5ndGg7IGorKykgewogICAgICBpZiAoZGF5T2ZXZWVrLmVxdWFscyhkYXlzW2pdKSkgZGF5TnVtYmVyID0gdGhlRGF5c09mV2Vla1tqXTsKICAgIH0KICAgIGlmIChkYXlOdW1iZXIgPT0gLTEpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJnZXREYXRlIiwgIlVua293biBkYXk6IiArIGRheU9mV2Vlayk7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgR3JlZ29yaWFuQ2FsZW5kYXIgZ2MgPSBuZXcgR3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAgIGdjLnNldEdyZWdvcmlhbkNoYW5nZShuZXcgRGF0ZSgpKTsKICAgIGludCBleHRyYURheXMgPSBnZXRFeHRyYURheXMoZ2MuZ2V0KGdjLkRBWV9PRl9XRUVLKSwgZGF5TnVtYmVyKTsKICAgIERhdGUgcmV0VmFsID0gbmV3IERhdGUoKTsKICAgIHJldFZhbC5zZXRNaW51dGVzKG1pbnV0ZXMpOwogICAgcmV0VmFsLnNldEhvdXJzKGhvdXJzKTsKICAgIGlmIChleHRyYURheXMgPiAwKSByZXRWYWwuc2V0SG91cnMocmV0VmFsLmdldEhvdXJzKCkgKyAyNCAqIGV4dHJhRGF5cyk7CiAgICByZXR1cm4gcmV0VmFsOwogIH0KCiAgcHVibGljIHN0YXRpYyBEYXRlIGdldERhdGUoU3RyaW5nIGRheU9mV2VlaywgRGF0ZSBzeXN0ZW1EYXRlKSB7CiAgICBTdHJpbmdbXSBkYXlzID0geyJTQVRVUkRBWSIsICJTVU5EQVkiLCAiTU9OREFZIiwgIlRVRVNEQVkiLCAiV0VETkVTREFZIiwgIlRIVVJTREFZIiwgIkZSSURBWSJ9OwogICAgaW50W10gdGhlRGF5c09mV2VlayA9IG5ldyBpbnRbN107CiAgICB0aGVEYXlzT2ZXZWVrWzBdID0gR3JlZ29yaWFuQ2FsZW5kYXIuU0FUVVJEQVk7CiAgICB0aGVEYXlzT2ZXZWVrWzFdID0gR3JlZ29yaWFuQ2FsZW5kYXIuU1VOREFZOwogICAgdGhlRGF5c09mV2Vla1syXSA9IEdyZWdvcmlhbkNhbGVuZGFyLk1PTkRBWTsKICAgIHRoZURheXNPZldlZWtbM10gPSBHcmVnb3JpYW5DYWxlbmRhci5UVUVTREFZOwogICAgdGhlRGF5c09mV2Vla1s0XSA9IEdyZWdvcmlhbkNhbGVuZGFyLldFRE5FU0RBWTsKICAgIHRoZURheXNPZldlZWtbNV0gPSBHcmVnb3JpYW5DYWxlbmRhci5USFVSU0RBWTsKICAgIHRoZURheXNPZldlZWtbNl0gPSBHcmVnb3JpYW5DYWxlbmRhci5GUklEQVk7CiAgICBkYXlPZldlZWsgPSBkYXlPZldlZWsudG9VcHBlckNhc2UoKTsKICAgIGludCBkYXlOdW1iZXIgPSAtMTsKICAgIGZvciAoaW50IGogPSAwOyBqIDwgZGF5cy5sZW5ndGg7IGorKykgewogICAgICBpZiAoZGF5T2ZXZWVrLmVxdWFscyhkYXlzW2pdKSkgZGF5TnVtYmVyID0gdGhlRGF5c09mV2Vla1tqXTsKICAgIH0KICAgIGlmIChkYXlOdW1iZXIgPT0gLTEpIHsKICAgICAgY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLmRlYnVnKCJnZXREYXRlIiwgIlVua293biBkYXk6IiArIGRheU9mV2Vlayk7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgR3JlZ29yaWFuQ2FsZW5kYXIgZ2MgPSBuZXcgR3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAgIGdjLnNldFRpbWUoc3lzdGVtRGF0ZSk7CiAgICBpbnQgZXh0cmFEYXlzID0gZ2V0RXh0cmFEYXlzKGdjLmdldChnYy5EQVlfT0ZfV0VFSyksIGRheU51bWJlcik7CiAgICBEYXRlIHJldFZhbCA9IHN5c3RlbURhdGU7CiAgICBpZiAoZXh0cmFEYXlzID4gMCkgcmV0VmFsLnNldEhvdXJzKHJldFZhbC5nZXRIb3VycygpICsgMjQgKiBleHRyYURheXMpOwogICAgcmV0dXJuIHJldFZhbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgaW50IGdldEV4dHJhRGF5cyhpbnQgbm93RGF5T2ZXZWVrLCBpbnQgbmV3RGF5T2ZXZWVrKSB7CiAgICBpZiAobm93RGF5T2ZXZWVrIDwgbmV3RGF5T2ZXZWVrKSB7CiAgICAgIHJldHVybiBuZXdEYXlPZldlZWsgLSBub3dEYXlPZldlZWs7CiAgICB9CiAgICBpZiAobm93RGF5T2ZXZWVrID4gbmV3RGF5T2ZXZWVrKSB7CiAgICAgIHJldHVybiA3IC0gbm93RGF5T2ZXZWVrICsgbmV3RGF5T2ZXZWVrOwogICAgfQogICAgcmV0dXJuIDA7CiAgfQoKICBwdWJsaWMgc3RhdGljIERhdGUgcm91bmRUaW1lVG9OZWFyZXN0RmlmdGVlbihEYXRlIHNvdXJjZSkgewogICAgaW50IG1pbnV0ZXMgPSBzb3VyY2UuZ2V0TWludXRlcygpOwogICAgaWYgKG1pbnV0ZXMgPCA4KSBzb3VyY2Uuc2V0TWludXRlcygwKTsKICAgIGlmIChtaW51dGVzID49IDggJiYgbWludXRlcyA8IDI0KSBzb3VyY2Uuc2V0TWludXRlcygxNSk7CiAgICBpZiAobWludXRlcyA+PSAyNCAmJiBtaW51dGVzIDwgMzgpIHNvdXJjZS5zZXRNaW51dGVzKDMwKTsKICAgIGlmIChtaW51dGVzID49IDM4ICYmIG1pbnV0ZXMgPCA1NCkgc291cmNlLnNldE1pbnV0ZXMoNDUpOwogICAgaWYgKG1pbnV0ZXMgPj0gNTQpIHNvdXJjZS5zZXRNaW51dGVzKDYwKTsKICAgIHNvdXJjZS5zZXRTZWNvbmRzKDApOwogICAgcmV0dXJuIHNvdXJjZTsKICB9CgogIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBpc0RhdGVFcXVhbFRvKERhdGUgc291cmNlMSwgRGF0ZSBzb3VyY2UyKSB7CiAgICBpZiAoc291cmNlMS5nZXRIb3VycygpID09IHNvdXJjZTIuZ2V0SG91cnMoKQogICAgICAgICYmIHNvdXJjZTEuZ2V0TWludXRlcygpID09IHNvdXJjZTIuZ2V0TWludXRlcygpCiAgICAgICAgJiYgc291cmNlMS5nZXREYXkoKSA9PSBzb3VyY2UyLmdldERheSgpCiAgICAgICAgJiYgc291cmNlMS5nZXRNb250aCgpID09IHNvdXJjZTIuZ2V0TW9udGgoKQogICAgICAgICYmIHNvdXJjZTEuZ2V0WWVhcigpID09IHNvdXJjZTIuZ2V0WWVhcigpCiAgICAgICAgJiYgc291cmNlMS5nZXREYXRlKCkgPT0gc291cmNlMi5nZXREYXRlKCkpIHJldHVybiB0cnVlOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcHVibGljIHN0YXRpYyBib29sZWFuIGlzRGF0ZU1vbnRoWWVhckVxdWFsKERhdGUgc291cmNlMSwgRGF0ZSBzb3VyY2UyKSB7CiAgICBpZiAoc291cmNlMS5nZXREYXkoKSA9PSBzb3VyY2UyLmdldERheSgpCiAgICAgICAgJiYgc291cmNlMS5nZXRNb250aCgpID09IHNvdXJjZTIuZ2V0TW9udGgoKQogICAgICAgICYmIHNvdXJjZTEuZ2V0WWVhcigpID09IHNvdXJjZTIuZ2V0WWVhcigpCiAgICAgICAgJiYgc291cmNlMS5nZXREYXRlKCkgPT0gc291cmNlMi5nZXREYXRlKCkpIHJldHVybiB0cnVlOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcHVibGljIHN0YXRpYyBib29sZWFuIGlzRGF0ZUVxdWFsVG9Db3JyZWN0KERhdGUgc291cmNlMSwgRGF0ZSBzb3VyY2UyKSB7CiAgICB0cnkgewogICAgICBpZiAoc291cmNlMS5nZXRIb3VycygpID09IHNvdXJjZTIuZ2V0SG91cnMoKQogICAgICAgICAgJiYgc291cmNlMS5nZXRNaW51dGVzKCkgPT0gc291cmNlMi5nZXRNaW51dGVzKCkKICAgICAgICAgICYmIHNvdXJjZTEuZ2V0TW9udGgoKSA9PSBzb3VyY2UyLmdldE1vbnRoKCkKICAgICAgICAgICYmIHNvdXJjZTEuZ2V0WWVhcigpID09IHNvdXJjZTIuZ2V0WWVhcigpCiAgICAgICAgICAmJiBzb3VyY2UxLmdldERhdGUoKSA9PSBzb3VyY2UyLmdldERhdGUoKSkgcmV0dXJuIHRydWU7CiAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuZGVidWcoImlzRGF0ZUVxdWFsVG9Db3JyZWN0IiwgIkZhaWxlZDoiICsgZSk7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfQo=</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gaXNEYXRlQWZ0ZXIoRGF0ZSBzb3VyY2UsIERhdGUgY29tcGFyZSwgaW50IGFkZE1pbnV0ZXMpIHsKICAgIGxvbmcgc291cmNlVGltZSA9IHNvdXJjZS5nZXRUaW1lKCk7CiAgICBsb25nIGNvbXBhcmVUaW1lID0gY29tcGFyZS5nZXRUaW1lKCk7CiAgICBpZiAoc291cmNlVGltZSArIChhZGRNaW51dGVzICogMTAwMCAqIDYwKSA8IGNvbXBhcmVUaW1lKSByZXR1cm4gdHJ1ZTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHB1YmxpYyBzdGF0aWMgdm9pZCBFYXN5KCkgewogICAgRGF0ZSBkID0gbmV3IERhdGUoKTsKICAgIGludCB0eiA9IGQuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgIFN5c3RlbS5vdXQucHJpbnRsbih0eik7CiAgfQoKICBwdWJsaWMgc3RhdGljIERhdGUgcmVtb3ZlRGF5cyhEYXRlIHNvdXJjZSwgaW50IGRheXMpIHsKICAgIHNvdXJjZS5zZXREYXRlKHNvdXJjZS5nZXREYXRlKCkgLSBkYXlzKTsKICAgIHJldHVybiBzb3VyY2U7CiAgfQoKICBwdWJsaWMgc3RhdGljIFN0cmluZyBnZXREYXlGcm9tU3RyaW5nKFN0cmluZyBkYXlTdHJpbmcpIHsKICAgIFN0cmluZ1tdIGRheXMgPSB7Ik1PTkRBWSIsICJUVUVTREFZIiwgIldFRE5FU0RBWSIsICJUSFVSU0RBWSIsICJGUklEQVkiLCAiU0FUVVJEQVkiLCAiU1VOREFZIn07CiAgICBTdHJpbmdbXSBkYXlzMiA9IHsiTU9OIiwgIlRVRSIsICJXRUQiLCAiVEhVIiwgIkZSSSIsICJTQVQiLCAiU1VOIn07CiAgICBTdHJpbmdbXSBkYXlzU3BhbmlzaCA9IHsKICAgICAgIkxVTkVTIiwgIk1BUlRFUyIsICJNSUVSQ09MRVMiLCAiSlVFVkVTIiwgIlZJRVJORVMiLCAiU0FCQURPIiwgIkRPTUlOR08iCiAgICB9OwogICAgZm9yIChpbnQgaiA9IDA7IGogPCBkYXlzLmxlbmd0aDsgaisrKSB7CiAgICAgIGlmIChkYXlTdHJpbmcudG9VcHBlckNhc2UoKS5pbmRleE9mKGRheXNbal0pID4gLTEpIHJldHVybiBkYXlzW2pdOwogICAgfQogICAgZm9yIChpbnQgaiA9IDA7IGogPCBkYXlzLmxlbmd0aDsgaisrKSB7CiAgICAgIGlmIChkYXlTdHJpbmcudG9VcHBlckNhc2UoKS5pbmRleE9mKGRheXMyW2pdKSA+IC0xKSByZXR1cm4gZGF5c1tqXTsKICAgIH0KICAgIGZvciAoaW50IGogPSAwOyBqIDwgZGF5cy5sZW5ndGg7IGorKykgewogICAgICBpZiAoZGF5U3RyaW5nLnRvVXBwZXJDYXNlKCkuaW5kZXhPZihkYXlzU3BhbmlzaFtqXSkgPiAtMSkgcmV0dXJuIGRheXNbal07CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHB1YmxpYyBzdGF0aWMgaW50IGdldE1vbnRoRnJvbVN0cmluZyhTdHJpbmcgbW9udGhTdHJpbmcpIHsKICAgIFZlY3RvciB0ZW1wID0gY29tLmJldHJhZGFyLmNvbW1vbi5VdGlsLnNwbGl0U3RyaW5nKG1vbnRoU3RyaW5nLCAiICIpOwogICAgZm9yIChpbnQgaiA9IDA7IGogPCB0ZW1wLnNpemUoKTsgaisrKSB7CiAgICAgIGludCByZXRWYWwgPSBjb20uYmV0cmFkYXIuY29tbW9uLlV0aWwuY29udmVydE1vbnRoU3RyaW5nKChTdHJpbmcpIHRlbXAuZWxlbWVudEF0KGopKTsKICAgICAgaWYgKHJldFZhbCA+PSAwKSByZXR1cm4gcmV0VmFsICsgMTsKICAgIH0KICAgIHJldHVybiAtMTsKICB9CgogIHB1YmxpYyBzdGF0aWMgRGF0ZSBjb252ZXJ0RGF5U3RyaW5nVG9EYXRlKFN0cmluZyBkYXlTdHJpbmcpIHsKICAgIFN0cmluZyB0aGVEYXkgPSBVdGlsNC5nZXREYXlGcm9tU3RyaW5nKGRheVN0cmluZyk7CiAgICBpZiAodGhlRGF5ICE9IG51bGwpIHJldHVybiBVdGlsNC5nZXREYXRlKHRoZURheSwgMCwgMCk7CiAgICByZXR1cm4gbnVsbDsKICB9Cg==</text>
      </register>
      <register name=":" type="4">
        <text>308</text>
      </register>
    </registers>
    <search>
      <last-search>updateTime</last-search>
      <last-offset />
      <last-pattern>updateTime</last-pattern>
      <last-replace>org.apache.poi.ss.usermodel.BorderStyle.</last-replace>
      <last-substitute>XSSFCellStyle.BORDER_</last-substitute>
      <last-dir>1</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search>
        <entry>betting</entry>
        <entry>getValue</entry>
        <entry>apache</entry>
        <entry>LiveMessageReceiver</entry>
        <entry>border</entry>
        <entry>XSSFCellStyle.BORDER_</entry>
        <entry>weighty</entry>
        <entry>setBoldWeight</entry>
        <entry>weight</entry>
        <entry>GAMES_PITCHING</entry>
        <entry>PTICHING</entry>
        <entry>PITCHING</entry>
        <entry>PITCHING_STARTERS</entry>
        <entry>PITCHING_STARTERS_SACRIFICE</entry>
        <entry>replaceBetweenCorrect</entry>
        <entry>correct</entry>
        <entry>removeBetweenCorrect</entry>
        <entry>isHandicap</entry>
        <entry>invoke</entry>
        <entry>updateTime</entry>
      </history-search>
      <history-cmd>
        <entry encoding="base64">JzwsJz5zLzskLy9n</entry>
        <entry encoding="base64">JzwsJz5zLywvKS9n</entry>
        <entry encoding="base64">JzwsJz5zLz0+LywvZ2M=</entry>
        <entry encoding="base64">JzwsJz5zLyQvOy9nYw==</entry>
        <entry encoding="base64">JzwsJz5zLzovLCAwKTsvZ2M=</entry>
        <entry encoding="base64">JzwsJz5zLzovLCAwKS9nYw==</entry>
        <entry encoding="base64">JzwsJz5zLzAvLTEvZw==</entry>
        <entry encoding="base64">JzwsJz5zLyQvLC9n</entry>
        <entry>w</entry>
        <entry>1754</entry>
        <entry>%s/GeneralScoutDataConnector.getScoutMatchData/gscdInstance.getScoutMatchDataFor/g</entry>
        <entry>%s/GeneralScoutDataConnector.getScoutMatchData/gsdcInstance.getScoutMatchDataFor/g</entry>
        <entry>%s/2018.5.1/2018.6.12/gc</entry>
        <entry>%s/MatchOdds.type/MatchOddsType.type/g</entry>
        <entry>47</entry>
        <entry>56</entry>
        <entry>21</entry>
        <entry>%s/XSSFCellStyle.BORDER_/org.apache.poi.ss.usermodel.BorderStyle./gc</entry>
        <entry>set ignorecase</entry>
        <entry>308</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>